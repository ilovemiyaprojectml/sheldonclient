@mixin _ruf-mat-select-inner-content-theme($palette) {
  $color: ruf-color($palette);
  .mat-select-underline {
    background-color: $color;
  }
}

@mixin _ruf-mat-select-placeholder-theme($color) {
  .mat-select-trigger,
  .mat-select-arrow {
    color: $color;
  }
}

@mixin _ruf-mat-select-text-theme($theme-colors) {
  @each $name, $color in $theme-colors {
    .ruf-#{$name} & {
      color: ruf-color($color, default-contrast);
    }
  }
}

@mixin ruf-mat-select-theme($theme, $cls: '[fisStyle]') {

  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $theme-colors: (
    primary: $primary,
    accent: $accent,
    emphasis: $emphasis
  );

  $ruf-select-value-text: ruf-color($foreground, base, 0.835);
  $ruf-select-color-error: ruf-color($background, error);

  .mat-select#{$cls} {
  $ruf-mat-select-placeholder: ruf-color($foreground, text);

    @include _ruf-mat-select-placeholder-theme($ruf-mat-select-placeholder);

    .mat-select-underline {
      background-color: ruf-color($foreground, divider);
    }

    .mat-select-arrow,
    .mat-select-trigger {
      @include _ruf-mat-select-text-theme($theme-colors);
      color: ruf-color($foreground, text);
    }

    &.mat-select-invalid:not(.mat-select-disabled) {
      @include _ruf-mat-select-placeholder-theme($ruf-select-color-error);
      .mat-select-value {
         color: $ruf-select-color-error;
      }
    }

    .mat-select-content, .mat-select-panel-done-animating {
      background: ruf-color($background, card);
    }

    &:not(.mat-select-disabled) .mat-select-value {
      @include _ruf-mat-select-text-theme($theme-colors);
      color: $ruf-select-value-text;
    }

    &.mat-select-disabled {
      .mat-select-value {
        opacity: 0.5;
      }
    }
  }

}

@mixin ruf-mat-select-typography($config, $cls: '[fisStyle]') {
  .mat-select#{$cls} {
    .mat-select-value {
       font-size: ruf-font-size($config, subheading-2);
    }
  }    
}
