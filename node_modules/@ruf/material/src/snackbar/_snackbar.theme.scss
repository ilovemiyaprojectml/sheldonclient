
@mixin _ruf-snackbar-inkbar($color-map, $color, $is-main-color: true) {
  $color-value: if($is-main-color, ruf-color(map-get($color-map, $color), 500), 
                    ruf-color($color-map, $color));
  &.ruf-inkbar-top {
      border-top-color: $color-value;
  }
  &.ruf-inkbar-bottom {
      border-bottom-color: $color-value;
  }
}

@function set-background-color($color-map, $color, $is-main-color, $hue) {  
  @if($is-main-color) {
     $color: ruf-color(map-get($color-map, $color), $hue);
  } @else {
     $color: ruf-color(ruf-palette-from-color(ruf-color($color-map, $color)), $hue);
  }
    @return $color;  
}

@mixin _ruf-snackbar-actions($color) {
   &.mat-button:hover,
   &.mat-button.cdk-keyboard-focused, 
   .mat-button[fisStyle]:hover,
   .mat-button[fisStyle].cdk-keyboard-focused {
     background-color: $color;
   }
}

@mixin snackbar-background-configuration($color-map, $color, $is-dark-theme, $is-main-color: true) {
  @if($is-dark-theme) {
      @include _ruf-snackbar-actions(set-background-color($color-map, $color, $is-main-color, 900));
      background-color: set-background-color($color-map, $color, $is-main-color, 800);
  } @else {
      @include _ruf-snackbar-actions(set-background-color($color-map, $color, $is-main-color, 200));
      background-color: set-background-color($color-map, $color, $is-main-color, 50);
  }
}

@mixin _ruf-snackbar-background-color($color-map, $colors, $is-dark-theme) {
    @each $color in $colors {
      &.ruf-#{$color} {
            @if(type-of(map-get($color-map, $color)) == 'map') {
               @include _ruf-snackbar-inkbar($color-map, $color);
               @include snackbar-background-configuration($color-map, $color, $is-dark-theme);
            } @else {
              // if $color-map does not contains map e.g background
               @include _ruf-snackbar-inkbar($color-map, $color, false);
               @include snackbar-background-configuration($color-map, $color, $is-dark-theme, false);
            }
      }
  }
}

@mixin ruf-mat-snackbar-theme($theme) {

  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);
  $is-dark-theme: map-get($theme, is-dark);
  $main-colors: primary, accent, warn, emphasis;
  $background-colors: error, success, info;

    .fis-style {
      &.mat-snack-bar-container {
        // Default configuration if not provided by user
        @include _ruf-snackbar-inkbar($background, info, false);
        @include snackbar-background-configuration($background, info, $is-dark-theme, false);

        @include  _ruf-snackbar-background-color($theme, $main-colors, $is-dark-theme);
        @include _ruf-snackbar-background-color($background, $background-colors, $is-dark-theme);
        box-shadow: none;
        color: ruf-color($foreground, darker-text);
        .mat-button, .mat-button[fisStyle] {
          background-color: transparent;
          border: none;
          color: ruf-color($foreground, darker-text);
          min-width: ruf-to-rem(82px);
        }
      }
  }
}

@mixin ruf-mat-snackbar-typography($config) {
  .fis-style {
      &.mat-snack-bar-container {
        font-size: ruf-font-size($config, body-1);
        line-height: ruf-line-height($config, body-1);
         .mat-button, .mat-button[fisStyle] {
          font-weight: ruf-font-weight($config, bold);
        }
      }
  }
}
