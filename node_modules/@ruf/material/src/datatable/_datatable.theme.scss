@mixin ruf-mat-datatable-theme($theme, $cls: '[fisStyle]') {

  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $warn: map-get($theme, warn);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);
  $main-colors: primary, accent, warn, emphasis;
  $background-colors: error, success, info;

  .mat-table#{$cls} {

    @include _ruf-mat-table-border-color($theme, $main-colors);
    @include _ruf-mat-table-border-color($background, $background-colors);

    border-bottom: 1px solid ruf-color($foreground, base, 0.2);

    .mat-header-row {
      background: ruf-color($foreground, base, 0);

      .mat-header-cell {
        border-bottom-color: ruf-color($primary);
        color: ruf-color($primary);
        font-weight: bold;

        &.mat-sort-header-sorted {
          background: ruf-color($foreground, text, 0.29);
        }

        .mat-sort-header-container {
          .mat-sort-header-arrow {
            &.mat-sort-header-asc {
              border-left: 5px solid transparent;
              border-right: 5px solid transparent;
              border-top: 5px solid ruf-color($background, app-bar);
            }

            &.mat-sort-header-desc {
              border-bottom: 5px solid  ruf-color($background, app-bar);
              border-left: 5px solid transparent;
              border-right: 5px solid transparent;
            }
          }
        }

        &:hover {
          background: ruf-color($accent , 50);
        }

        &.mat-sort-header-sorted {
          background: ruf-color($accent , 50);
        }
      }
    }

    .mat-row {
      border-color: ruf-color($foreground, base, 0.10);
    }

    &.striped-rows {
      .mat-row:nth-child(even) {
        background-color: ruf-color($background, page-header);
      }

      .mat-row:nth-child(odd) {
        background-color: ruf-color($background, card);
      }
    }

    &.grey-header {
      .mat-header-row {
        .mat-header-cell {
          border-bottom-color: ruf-color($foreground, divider);
          color: ruf-color($foreground, text);
        }
      }
    }

    &[row-border=true] {
      .mat-row {
        .mat-cell:first-child {
          border-left-color: ruf-color($primary);
        }
      }
    }
  }
}


@mixin ruf-mat-table-typography($config , $cls: '[fisStyle]') {
  .mat-table#{$cls} {
    .mat-header-cell {
        font-size: mat-font-size($config, subheading-1);  //14px
    }
    .mat-row {
      .mat-cell {
        font-size: mat-font-size($config, subheading-2);  //16px
      }
    }
  }
}

@mixin _ruf-mat-table-border-color($color-map, $colors) {
  @each $color in $colors {
    &[row-border=true][color=#{$color}] {
      .mat-row {
        .mat-cell:first-child {
          @if(type-of(map-get($color-map, $color)) == 'map') {
            border-left-color: ruf-color(map-get($color-map, $color));
          } @else {
            // if $color-map does not contains map e.g background
            border-left-color: ruf-color($color-map, $color);
          }
        }
      }
    }
  }
}
