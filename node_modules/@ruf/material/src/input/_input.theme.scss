
@mixin ruf-mat-input-theme($theme, $cls: '[fisStyle]') {

  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $warn: map-get($theme, warn);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-form-field-label-color: ruf-color($foreground, text);
  $ruf-form-field-underline-color:  ruf-color($foreground, input-border);
  $ruf-input-error-color: ruf-color($background, error);
  $ruf-input-text-color:  ruf-color($foreground, input-value);

  .mat-form-field#{$cls} {
    &:not(.mat-form-field-invalid):not(.mat-focused) {
      .mat-form-field-label {
        color: $ruf-form-field-label-color;
      }

      .mat-hint, .mat-icon {
        color: $ruf-form-field-label-color;
      }

      .mat-form-field-prefix,
      .mat-form-field-suffix { 
         color: $ruf-input-text-color;
      }

      .mat-form-field-underline {
        background-color: $ruf-form-field-underline-color;
      }
    }
  
    &.mat-form-field-invalid {
      .mat-form-field-label, 
      .mat-form-field-label .mat-form-field-required-marker,
      .mat-form-field-underline
      .mat-form-field-outline-thick, 
      .mat-icon,
      .mat-error {
        color: $ruf-input-error-color;
      }

      .mat-form-field-ripple {
        background-color: $ruf-input-error-color;
      }
    }

    &.mat-form-field-disabled {
      opacity: 0.5;
    }
 }

 .mat-form-field.mat-form-field-appearance-legacy#{$cls} {
    &.mat-form-field-invalid {
      .mat-input-element {
          caret-color: $ruf-input-error-color;
      }
    }

    .mat-input-element {
      color: $ruf-input-text-color;
    } 
  }
}

 
// The code below was copied from the original material2 code. Changes are marked with "RUF"
@mixin ruf-mat-input-typography($config, $cls: '[fisStyle]') {
  $ruf-label-font-size: ruf-font-size($config, subheading-2);

    .mat-form-field#{$cls} {
      .mat-form-field-label {
         font-size: $ruf-label-font-size;
       }
    }

    .mat-form-field.mat-form-field-appearance-legacy#{$cls} {
      .mat-input-element {
        font-size: $ruf-label-font-size;
      } 
  }  
}
