/**
 * @name fisDropTarget
 * @description Directive used to add the payload of a REST call to the current scope
 * @methodOf fis.core.directives
 *
 */
export default function (fisPubSubService) {
  'ngInject';
  return {
    restrict: 'A',
    link: function (scope, element, attrs) {
      var dragEnterEvent = 'fisOnDragEnter.' + attrs.fisDragDropType;
      var dragLeaveEvent = 'fisOnDragLeave.' + attrs.fisDragDropType;
      var dropEvent = 'fisOnDrop.' + attrs.fisDragDropType;

      element.get(0).addEventListener('dragover', function (e) {
        e.preventDefault();
      });

      element.get(0).addEventListener('dragenter', function (e) {
        fisPubSubService.publish(dragEnterEvent, { event: e });
      });

      element.get(0).addEventListener('dragleave', function (e) {
        fisPubSubService.publish(dragLeaveEvent, { event: e });
      });

      element.get(0).addEventListener('drop', function (e) {
        e.preventDefault();
        fisPubSubService.publish(dropEvent, { event: e });
      });
    }
  };
}
