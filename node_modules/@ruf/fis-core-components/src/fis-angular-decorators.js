var fis = window.fis = window.sg = (window.fis || window.sg || {});

fis.__angularModule = angular.module;

fis.__controllers = {};

angular.module = function (name, deps) {
  'use strict';
  var module = fis.__angularModule(name, deps);
  var origCtrlFn = module.controller;

  module.controller = function (name, constructor) {
    var entry = constructor;

    if (angular.isArray(constructor)) {
      entry = constructor[constructor.length - 1];
    }
    fis.__controllers[name] = entry;

    return origCtrlFn.apply(this, arguments);
  };
  return module;
};
