'use strict';

describe('fis-input directive', function () {
  beforeEach(angular.mock.module('fis.core'));

  it('should invoke scope.registerInput', function () {
    angular.mock.inject(function ($compile, $rootScope) {
      var scope = $rootScope.$new();
      scope.user = { email: 'bob@example.com' };
      scope.registerInput = jasmine.createSpy('registerInput');
      $compile('<input fis-input ng-model="user.address.city"></div>')(scope);
      $rootScope.$apply();
      expect(scope.registerInput.calls.mostRecent().args[0].$setValidity).toBeDefined();
      expect(scope.registerInput.calls.mostRecent().args[0].$name).toEqual('address_city');
    });
  });
});
