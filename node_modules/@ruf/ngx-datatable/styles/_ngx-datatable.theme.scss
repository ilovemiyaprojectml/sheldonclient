@import 'node_modules/@ruf/theming/styles/theming/_theming.scss';

@mixin ruf-ngx-datatable-theme($theme, $cls: '[fisStyle]') {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $warn: map-get($theme, warn);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);
  $main-colors: primary, accent, warn, emphasis;
  $background-colors: error, success, info;

  .ngx-datatable#{$cls} {

    @include _ngx-data-table-border-color($theme, $main-colors);
    @include _ngx-data-table-border-color($background, $background-colors);

    &[row-border=true] {
      .datatable-row-wrapper {
        border-color: ruf-color($primary);
      }
    }
    .datatable-header {
      background: ruf-color($background, app-bar);
      border-bottom-color: ruf-color($primary);
      color: ruf-color($primary);

      .datatable-header-cell {
        &:hover {
          background-color: ruf-color($accent, 0.7);
        }

        .datatable-checkbox {
          input {
            &:before {
              border-color: ruf-color($foreground, subtle-divider);
            }
            &:after {
              border-color: ruf-color($foreground, subtle-divider);
            }
            &:checked {
              &:before {
                border-color: ruf-color($foreground, text);
              }
            }
          }
        }
      }
    }


    .datatable-body-row {
      border-bottom-color: ruf-color($foreground, dividers);
    }

    .datatable-row-even {
      background-color: ruf-color($background, app-bar);
    }

    .datatable-row-odd {
      background-color: ruf-color($background, background);
    }

    .datatable-row-wrapper {
      .datatable-body-cell {
        .datatable-body-cell-label {
          color: ruf-color($foreground, text);

          input,
          select {
            border-color: ruf-color($foreground, subtle-divider);
          }
          .ruf-ngx-table-subtext {
            color: ruf-color($foreground, disabled-text);
          }
        }

        .datatable-checkbox {
          input[type='checkbox'] {
            &:after {
              border-color: ruf-color($foreground, subtle-divider);
            }
            &:checked {
              &:before {
                border-color: ruf-color($foreground, subtle-divider);
              }
            }
          }
        }
        .datatable-icon-right {
          color: ruf-color($foreground, text);
        }
      }

      .datatable-body-row.active {
        background: ruf-color($accent, 0.4) !important;
      }

      .datatable-row-detail {
        border-bottom-color: ruf-color($foreground, subtle-divider);
        .row-details {
          .title {
            color: ruf-color($foreground, text, 0.6);
          }
        }
      }
    }
  }

  .datatable-footer {
    background: ruf-color($background, app-bar);
    .datatable-pager {
      .pager {
        border-color: ruf-color($foreground, subtle-divider);
        li.disabled a {
          color: rgba(0, 0, 0, 0.26) !important;
        }

        li {
          border-right-color: ruf-color($foreground, subtle-divider);
          &.active {
            background: ruf-color($background, selected-button);
            a {
              color: ruf-color($background, background, 0.7);
            }
          }
          a {
            color: ruf-color($foreground, text);
          }
        }
      }
    }
  }
  $complete-config: ruf-typography-config();
  @include ruf-ngx-datatable-typography($complete-config);

}


@mixin _ngx-data-table-border-color($color-map, $colors) {
  @each $color in $colors {
    &[row-border=true][color=#{$color}] {
      .datatable-row-wrapper {
        @if(type-of(map-get($color-map, $color)) == 'map') {
          border-left-color: ruf-color(map-get($color-map, $color));
        } @else {
          // if $color-map does not contains map e.g background
          border-left-color: ruf-color($color-map, $color);
        }
      }
    }
  }
}

@mixin ruf-ngx-datatable-typography($config , $cls: '[fisStyle]') {
  .ngx-datatable#{$cls} {
    .datatable-header {
      font-size: mat-font-size($config, subheading-1); //14px
      font-weight: mat-font-weight($config, bold);
    }
    .datatable-row-wrapper {
      .datatable-body-cell {
        .datatable-body-cell-label {
          font-size: mat-font-size($config, subheading-2); //16px

          .ruf-ngx-table-subtext {
            font-size: mat-font-size($config, subheading-1);
            line-height: mat-line-height($config, subheading-1);
          }
        }
      }
    }
  }
}
