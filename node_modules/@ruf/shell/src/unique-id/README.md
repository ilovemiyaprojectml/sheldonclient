# Unique (Idempotent) ID Generator

The `rufId` directive is used to generate unique-id values for the application components for automation testing.
After generating a unique-id value it will add `id` attribute to the component.
The id is idempotent (will always generate the same id) for a component (provided the DOM structure remains the same).

In case, user has already specified an `id` for a component along with rufId directive. The `id` value specified 
by the user will be considered and no new unique-id value will be generated for this component.

User can specify a value for the `rufId` attribute (assigning a value to `rufId` attribute is optional). This value will 
be used to generate a unique-id value for that element. 

Note: The unique-id directive will only be available in development mode (not in production mode).

### Important Points
1. It is advisable either to specify an `id` attribute on the parent element (parent of element having `rufId` 
attribute specified) or to specify a value for `rufId="some_value"` attribute.
2. For RUF components, we have already added a `rufId` attribute to the component's templates. So, for RUF components
the unique-id values will be generated automatically. 
For better performance, users should specify an `id` attribute on the container element wrapping a RUF component
or assign a value to `rufId` attribute as mentioned in first point. 

### Example 1. Without parent Id
In this case, as no parent id is specified by the user in DOM hierarchy, `rufId` will generate a unique id value 
using `nodeName` of the current element.
```html
<div>
  <div rufId>
  </div>
  <div rufId>
  </div>
</div>
```
results in
```html
<div>
  <div rufId id="div_0">
  </div>
  <div rufId id="div_1">
  </div>
</div>
```

### Example 2. With parent Id
In this case, `rufId` will take the parent id value and use it to generate a unique-id for child elements. 
```html
<div id="parent">
  <div rufId>
  </div>
  <div rufId>
  </div>
</div>
```
results in 
```html
<div id="parent">
  <div rufId id="parent_div_0">
  </div>
  <div rufId id="parent_div_1">
  </div>
</div>
```

### Example 3. Element having value for `rufId` attribute
In this case, we have specified the optional value for `rufId=child_div` attribute. So, this value will be used 
to generate a unique-id for the current element.
```html
<div id="parent">
  <div rufId="child_div">
    <div rufId></div>
  </div>
</div>
```
results in
```html
<div id="parent">
  <div rufId id="child_div_0">
    <div id="child_div_0_div_0"></div>
  </div>
</div>
```

### Example 3. Elements with id and rufId
In this case, as user has explicitly specified an id value (`child1`) along side with `rufId` attribute, the user 
specified id value will be considered and `rufId` won't generate a new unique-id value for the current element.

```html
<div id="parent">
  <div id="chlid1" rufId>
    <div  rufId></div>
  </div>
</div>
```
results in
```html
<div id="parent">
  <div rufId id="child1">
    <div rufId id="child1_div_0"></div>
  </div>
</div>
```

### Example 4. Elements with *ngFor 

```html
<div id="parent">
  <ul>
    <li *ngFor="x in ['Item-1', 'Item-2', 'Item-3']" rufId>{{x}}</li>
  </ul>
</div>
```
results in
```html
<div id="parent">
  <ul>
    <li rufId id="parent_li_0">Item-1</li>
    <li rufId id="parent_li_1">Item-2</li>
    <li rufId id="parent_li_2">Item-3</li>
  </ul>
</div>
```

### Example 5. Elements with *ngIf

```html
<div id="parent">
  <div *ngIf="flag" rufId>Flag value is true!!</div>
  <div *ngIf="!flag" rufId>Flag value is false!!</div>
</div>
```
results in
For flag = true
```html
<div id="parent">
  <div *ngIf="flag" rufId id="parent_div_0">Flag value is true!!</div>   
</div>
```
For flag = false
```html
<div id="parent">
  <div *ngIf="!flag" rufId id="parent_div_0">Flag value is false!!</div>   
</div>
```

### Example 6. For RUF components
As shown below, user should specify an `id` attribute for parent element. The unique-id values for 
`ruf-navbar` and `ruf-menubar` will get generated automatically (because we have already added `rufId`
attribute to RUF component's templates). But user has to specify `rufId` attribute for the child `<a></a>`
elements.

```html
<demo-example title="Navbar without [color] attribute" [code]="html" id="demo-navbar1">
<ruf-navbar>
  <ruf-menubar>
    <a rufId rufMenubarItem path="item1">First</a>
    <a rufId rufMenubarItem path="item2">Second</a>
    <a rufId rufMenubarItem path="item3">Third</a>
    <a rufId rufMenubarItem path="item4">Fourth</a>
    <a rufId rufMenubarItem path="item5">Fifth</a>
  </ruf-menubar>
</ruf-navbar>
</demo-example>
```
results in
```html
<demo-example title="Navbar without [color] attribute" [code]="html" id="demo-navbar1">
<ruf-navbar id="demo-navbar1_ruf-navbar_0">
  <ruf-menubar id="demo-navbar1_ruf-navbar_0_ruf-menubar_0">
    <a rufMenubarItem path="item1" id="demo-navbar1_ruf-navbar_0_ruf-menubar_0_a_0">First</a>
    <a rufMenubarItem path="item2" id="demo-navbar1_ruf-navbar_0_ruf-menubar_0_a_1">Second</a>
    <a rufMenubarItem path="item3" id="demo-navbar1_ruf-navbar_0_ruf-menubar_0_a_2">Third</a>
    <a rufMenubarItem path="item4" id="demo-navbar1_ruf-navbar_0_ruf-menubar_0_a_3">Fourth</a>
    <a rufMenubarItem path="item5" id="demo-navbar1_ruf-navbar_0_ruf-menubar_0_a_4">Fifth</a>
  </ruf-menubar>
</ruf-navbar>
</demo-example>
```
Here, we are assuming that `rufId` attribute specified in component's templates for `ruf-navbar` and `ruf-menubar`
will generate `id` values as `demo-navbar1_ruf-navbar_0` and `demo-navbar1_ruf-navbar_0_ruf-menubar_0` respectively.
