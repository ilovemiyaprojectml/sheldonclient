@import 'node_modules/@ruf/theming/styles/theming/_theming.scss';

@mixin _ruf-dynamic-menubar-color-from-palette($color) {
  .mat-tab-group .mat-tab-list .mat-ink-bar {
      background-color: ruf-color($color);
    }

    ruf-menu-label {
      .ruf-close.mat-icon-button[fisStyle] {
        &:hover, &.cdk-keyboard-focused {
          background-color: ruf-color($color);
          color: ruf-color($color, default-contrast);
          transition: background-color 0.2s ease-in 0s, color 0.2s ease-in 0s;
        }
        }
    }
}
@mixin ruf-dynamic-menubar-theme($theme) {

  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-dynamic-menubar-highlight-color: ruf-color($background, hover) !default;
  $ruf-dynamic-menubar-item-active-color: ruf-color($accent) !default;

  ruf-dynamic-menubar {
    .mat-tab-group {
      .mat-tab-labels {
        >.mat-tab-label {
          color: currentColor; /* make sure the label uses the parent's color */
          opacity: 0.85; /* Make sure labels have just a little less opacity to further differenciate activation */
        }

        .mat-tab-label {
          &:not(.mat-tab-disabled) {
            &:hover, &.cdk-keyboard-focused {
              background-color: $ruf-dynamic-menubar-highlight-color;
             }
          }
         }

        >.mat-tab-label-active {
          opacity: 1; /* Make sure active labels have have full opcity */
        }
      }

      .mat-tab-list .mat-ink-bar {
        background-color: $ruf-dynamic-menubar-item-active-color;
      }
    }


    ruf-menu-label {
      .ruf-close.mat-icon-button[fisStyle] {
        &:hover, &.cdk-keyboard-focused {
        background-color: ruf-color($accent);
        color: ruf-color($accent, default-contrast);
        transition: background-color 0.2s ease-in 0s, color 0.2s ease-in 0s;
      }
    }
    }

    &.ruf-default {
      @include _ruf-dynamic-menubar-color-from-palette($accent)
    }

    &.ruf-primary {
      @include _ruf-dynamic-menubar-color-from-palette($primary)
    }

    &.ruf-accent {
      @include _ruf-dynamic-menubar-color-from-palette($accent)
    }

    &.ruf-emphasis {
      @include _ruf-dynamic-menubar-color-from-palette($emphasis)
    }

    &.ruf-dynamic-tabs {
      @include ruf-tabs-theme($theme);
    }
  }

}

@mixin ruf-dynamic-menubar-typography($config) {
  ruf-dynamic-menubar {
    font-family: ruf-font-family($config);

    &.ruf-dynamic-menubar-flex-height .mat-tab-labels > .mat-tab-label {
      line-height: inherit;
    }

    .mat-tab-labels > .mat-tab-label {
      line-height: ruf-line-height($config, dynamic-menubar);
    }
  }
}

@mixin ruf-tabs-theme($theme) {
  $hover: rgba(0, 0, 0, 0.345);
  $highlight: rgba(0, 0, 0, 0.12);

  ruf-menu-label {
    .ruf-close.mat-icon-button[fisStyle] {
      &:hover, &.cdk-keyboard-focused {
        background-color: $hover;
        color: inherit;

      }
    }
  }

  .mat-tab-header-pagination:not(.mat-tab-header-pagination-disabled):hover {
    background-color: $hover;
  }

  .mat-tab-list .mat-ink-bar {
    background: none;
  }
  .mat-tab-group {
    .mat-tab-labels {
      .mat-tab-label {
        &:hover,
        &.cdk-keyboard-focused {
          background-color: $hover;
        }
      }
      >.mat-tab-label {
        background-color: $highlight;
      }
      >.mat-tab-label-active {
        background: none;
      }
    }
  }
}
