// import each component theme file
// This file provides standard FIS palettes and functions to create your own if you wish.

$black-87-opacity: rgba(black, 0.87);
$white-87-opacity: rgba(white, 0.87);
$black-6-opacity: rgba(black, 0.06);
$white-6-opacity: rgba(white, 0.06);

@function ruf-palette-contrast($color, $dark: #000000, $light: #ffffff) {
  @if (lightness($color) > 50) {
    @return $dark; // Lighter background, return dark color
  } @else {
    @return $light; // Darker background, return light color
  }
}

@function ruf-palette-from-color($color, $lighter: null, $darker: null) {
  //from https://stackblitz.com/edit/angular-wtr2vx?file=src%2Fruf.scss
  $base-light: #fff;
  $base-dark: black;

  $base-dark: darken($base-dark, 15);
  $base-triad: hsl(hue($color) * 270 % 360, saturation($color), lightness($color));
  // from https://github.com/bgrins/TinyColor/blob/master/tinycolor.js#L654
  // from https://github.com/mbitson/mcg/blob/master/scripts/controllers/ColorGeneratorCtrl.js#L241

  $a100: lighten(saturate(mix($base-triad, $base-dark, 15), 80), 60);
  $a200: lighten(saturate(mix($base-triad, $base-dark, 15), 80), 50);
  $a400: lighten(saturate(mix($base-triad, $base-dark, 15), 100), 35);
  $a700: lighten(saturate(mix($base-triad, $base-dark, 15), 100), 25);

  $lighter: if($lighter, $lighter, mix($color, $base-light, 30));
  $darker: if($darker, $darker, mix($color, $base-dark, 70));
  $default: mix($color, $base-light, 100);

  @return (
    50: mix($color, $base-light, 12),
    100: mix($color, $base-light, 30),
    200: mix($color, $base-light, 50),
    300: mix($color, $base-light, 70),
    400: mix($color, $base-light, 85),
    500: $default,
    600: mix($color, $base-dark, 87),
    700: mix($color, $base-dark, 70),
    800: mix($color, $base-dark, 54),
    900: mix($color, $base-dark, 35),
    A100: $a100,
    A200: $a200,
    A400: $a400,
    A700: $a700,

    contrast: (
      50: ruf-palette-contrast(mix($color, $base-light, 12)),
      100: ruf-palette-contrast(mix($color, $base-light, 30)),
      200: ruf-palette-contrast(mix($color, $base-light, 50)),
      300: ruf-palette-contrast(mix($color, $base-light, 70)),
      400: ruf-palette-contrast(mix($color, $base-light, 85)),
      500: ruf-palette-contrast($default),
      600: ruf-palette-contrast(mix($color, $base-dark, 87)),
      700: ruf-palette-contrast(mix($color, $base-dark, 70)),
      800: ruf-palette-contrast(mix($color, $base-dark, 54)),
      900: ruf-palette-contrast(mix($color, $base-dark, 35)),
      A100: ruf-palette-contrast($a100),
      A200: ruf-palette-contrast($a200),
      A400: ruf-palette-contrast($a400),
      A700: ruf-palette-contrast($a700),
    )
  );
}

$ruf-grey: ruf-palette-from-color(#666);
$ruf-teal: ruf-palette-from-color(#00565b, #00a4b6);
$ruf-mosque: ruf-palette-from-color(#00565b);
$ruf-new-blue: ruf-palette-from-color(#4dbfcc);


/* accent colors, used sparingly (less than 15%) to bring attention to an element. */
$ruf-green: ruf-palette-from-color(#8dc63f);
$ruf-blue: ruf-palette-from-color(#00a4b6);
$ruf-plum: ruf-palette-from-color(#872b62);
$ruf-gold: ruf-palette-from-color(#f5ad2a);
$ruf-aqua: ruf-palette-from-color(#05e7ff);

// plum color for dark theme
$ruf-light-plum: ruf-palette-from-color(map-get($ruf-plum, 200));

// Validation/Connotative Color
$ruf-orange: ruf-palette-from-color(#ff7512);
$ruf-dark-blue: ruf-palette-from-color(#0e3aa1);
$ruf-success: ruf-palette-from-color(#00b016);
$ruf-error: ruf-palette-from-color(#cc0a00);

// Validation Colors for Dark Theme
$ruf-light-orange: ruf-palette-from-color(#ff9040);
$ruf-light-blue: ruf-palette-from-color(#6f8ac7);
$ruf-light-success: ruf-palette-from-color(#4dc85c);
$ruf-light-error: ruf-palette-from-color(#ff7a73);


$ruf-emphasis: ruf-palette-from-color(#872b62);
$ruf-cyprus: ruf-palette-from-color(#003338);


/* dark palette base values */
$ruf-dark-foreground-base: #f9f9f9;
$ruf-dark-background-base: #131313;

// Background palette for light themes.
$ruf-light-theme-background: (
  // sass-lint:disable-block function-name-format
  status-bar: #ddd, // FIS med background
  side-megamenu: #ddd, // RUF addition
  app-bar:    white,
  app-canvas: #e5e5e5, // UX site suggests white, RUF uses #f5f5f5. Not used by material
  background: #f4f4f4, // FIS light-background
  hover:      rgba(black, 0.10),
  halo:      rgba(black, 0.209),
  icon: rgba(black, 0.30),
  card:       white,
  card-canvas: #eee, // RUF addition
  dialog:     white,
  disabled-button:   rgba(black, 0.155),
  page-header: #f5f5f5,
  raised-button: white,
  footer:     #eee, // RUF addition
  file-upload: map_get($ruf-mosque, 500),
  nav-bar: white,
  focused-button: $black-6-opacity,
  selected-button: rgba(black, 0.53),
  selected-disabled-button: map_get($ruf-grey, 400),
  disabled-button-toggle: map_get($ruf-grey, 200),
  unselected-chip: map_get($ruf-grey, 300), // material breaking change in beta-10
  disabled-list-option: map_get($ruf-grey, 200), // material breaking change in beta-10
  error: map-get($ruf-error, 500),
  success: map-get($ruf-success, 500),
  info: map-get($ruf-dark-blue, 500),
  contrast: $ruf-dark-background-base,
  sidemenu-focus: rgba(map-get($ruf-blue, 500), 0.12)
);

// Background palette for dark themes.
$ruf-dark-theme-background: (
  status-bar: $ruf-dark-background-base,
  side-megamenu: $ruf-dark-background-base, // RUF addition
  app-bar:    #242424,
  app-canvas: #242424, // Not used by material
  background: #303030,
  hover:      rgba($ruf-dark-foreground-base, 0.10),
  halo:      rgba($ruf-dark-foreground-base, 0.209),
  icon: rgba($ruf-dark-foreground-base, 0.30),
  card:       #303030,
  card-canvas: #303030, // RUF addition
  dialog:     lighten($ruf-dark-background-base, 15),
  disabled-button: rgba($ruf-dark-foreground-base, 0.12),
  page-header: lighten($ruf-dark-background-base, 8),
  raised-button: map-get($ruf-grey, 800),
  footer:     lighten($ruf-dark-background-base, 20), // RUF addition
  file-upload: map-get($ruf-mosque, 500),
  nav-bar: lighten($ruf-dark-background-base, 5),
  focused-button: $white-6-opacity,
  selected-button: map_get($ruf-grey, 900), // sass-lint:disable-line function-name-format
  selected-disabled-button: map_get($ruf-grey, 800), // sass-lint:disable-line function-name-format
  disabled-button-toggle: map_get($ruf-grey, 900), // sass-lint:disable-line function-name-format
  unselected-chip: map_get($ruf-grey, 700), // sass-lint:disable-line function-name-format
                                           // material breaking change in beta-10
  disabled-list-option: $ruf-dark-background-base, // material breaking change in beta-10
  error: map-get($ruf-light-error, 500),
  success: map-get($ruf-light-success, 500),
  info: map-get($ruf-light-blue, 500),
  contrast: $ruf-dark-foreground-base,
  sidemenu-focus: rgba(map-get($ruf-blue, 500), 0.12)
);

// Foreground palette for light themes.
$ruf-light-theme-foreground: (
  base:            black,
  divider:         rgba(black, 0.12),
  dividers:        rgba(black, 0.12),
  disabled:        #777363, //rgba(black, 0.38),
  disabled-button: #777363, //rgba(black, 0.38),
  disabled-text:   rgba(#777363, 0.5), //rgba(black, 0.38),
  hint-text:       #838383, //rgba(black, 0.38),
  secondary-text:  rgba(black, 0.54),
  icon:            rgba(black, 0.54),
  icons:           rgba(black, 0.54),
  text:            #4e4e4e, // material: rgba(black, 0.87),
  lighter-text:     $ruf-dark-foreground-base, // #f9f9f9
  darker-text:     #2a2a2a,
  slider-min:        rgba(black, 0.87), // material breaking change in beta-10
  slider-off:        rgba(black, 0.38), // material breaking change in beta6
  slider-off-active: rgba(black, 0.38), // material breaking change in beta6
  link:            #2a5db0, // RUF addition
  link-visited:    #3888bc, // RUF addition
  soft-link:       #696969,  // RUF addition
  subtle-divider:  #b4b4b4, // RUF addition: footer top border
  shadow:          rgba(black, 0.25), // RUF addition: banner box shadow
  input-value:     #2a2a2a,
  input-border:     #767676, //rgba(118, 118, 118, 1) used for box-inputs colors
  file-upload: white,
  chart-label: #b6b6b6 // Ruf Addition for ngx-charts
);

// Foreground palette for dark themes.
$ruf-dark-theme-foreground: (
  base:            $ruf-dark-foreground-base,
  divider:         rgba($ruf-dark-foreground-base, 0.12),
  dividers:        rgba($ruf-dark-foreground-base, 0.12),
  disabled:        rgba($ruf-dark-foreground-base, 0.3),
  disabled-button: rgba($ruf-dark-foreground-base, 0.3),
  disabled-text:   rgba($ruf-dark-foreground-base, 0.3),
  hint-text:       rgba($ruf-dark-foreground-base, 0.3),
  secondary-text:  rgba($ruf-dark-foreground-base, 0.7),
  icon:            $ruf-dark-foreground-base,
  icons:           $ruf-dark-foreground-base,
  text:            $ruf-dark-foreground-base, // #f9f9f9
  lighter-text:     $ruf-dark-foreground-base,
  darker-text:     #f4f4f4,
  slider-min:        $ruf-dark-foreground-base, // material breaking change in beta-10
  slider-off:        rgba($ruf-dark-foreground-base, 0.3), // material breaking change in beta6
  slider-off-active: rgba($ruf-dark-foreground-base, 0.3), // material breaking change in beta6
  link:            lighten(#2a5db0, 50),
  link-visited:    lighten(#3888bc, 50),
  soft-link:       lighten(#696969, 50),
  subtle-divider:  rgba($ruf-dark-foreground-base, 0.8), // RUF addition: footer top border
  shadow:          rgba($ruf-dark-foreground-base, 0.8),
  input-value:     #f4f4f4,
  input-border:     #a7a7a7, //rgba(167,167,167, 1) used for box-inputs colors
  file-upload: $ruf-dark-foreground-base,
  chart-label: #b6b6b6 // Ruf Addition for ngx-charts
);


// For a given hue in a palette, return the contrast color from the map of contrast palettes.
// @param $color-map
// @param $hue
@function ruf-contrast($palette, $hue) {
  @return map-get(map-get($palette, contrast), $hue);
}

// Creates a map of hues to colors for a theme. This is used to define a theme palette in terms
// of the Material Design hues.
// @param $color-map
// @param $primary
// @param $lighter
@function ruf-palette($base-palette, $default: 500, $lighter: 100, $darker: 700) {
  $result: map_merge($base-palette, ( // sass-lint:disable-line function-name-format
    default: map-get($base-palette, $default),
    lighter: map-get($base-palette, $lighter),
    darker: map-get($base-palette, $darker),
    default-contrast: ruf-contrast($base-palette, $default),
    lighter-contrast: ruf-contrast($base-palette, $lighter),
    darker-contrast: ruf-contrast($base-palette, $darker)
  ));

  // For each hue in the palette, add a "-contrast" color to the map.
  @each $hue, $color in $base-palette {
    $result: map_merge($result, ( // sass-lint:disable-line function-name-format
      '#{$hue}-contrast': ruf-contrast($base-palette, $hue)
    ));
  }

  @return $result;
}

// same as ruf-palette but will create the color map for you based on the provided color
@function ruf-quick-palette($base-color, $base-lighter: null, $base-darker: null) {
  @return ruf-palette(ruf-palette-from-color($base-color, $base-lighter, $base-darker));
}

// Gets a color from a theme palette (the output of ruf-palette).
// The hue can be one of the standard values (500, A400, etc.), one of the three preconfigured
// hues (default, lighter, darker), or any of the aforementioned prefixed with "-contrast".
//
// @param $color-map The theme palette (output of ruf-palette).
// @param $hue The hue from the palette to use. If this is a value between 0 and 1, it will
//     be treated as opacity.
// @param $opacity The alpha channel value for the color.
@function ruf-color($palette, $hue: default, $opacity: null) {
  // If hueKey is a number between zero and one, then it actually contains an
  // opacity value, so recall this function with the default hue and that given opacity.
  @if type-of($hue) == number and $hue >= 0 and $hue <= 1 {
    @return ruf-color($palette, default, $hue);
  }

  $color: map-get($palette, $hue);
  $opacity: if($opacity == null, opacity($color), $opacity);

  @return rgba($color, $opacity);
}

// Creates a container object for a light theme to be given to individual component theme mixins.
@function ruf-light-theme($primary: ruf-palette($ruf-teal), $accent: ruf-palette($ruf-gold), $emphasis: ruf-palette($ruf-plum), $warn: ruf-palette($ruf-orange), $foreground: $ruf-light-theme-foreground, $background: $ruf-light-theme-background) {
  @return (
    primary: $primary,
    accent: $accent,
    emphasis: $emphasis,
    warn: $warn,
    is-dark: false,
    foreground: $foreground,
    background: $background,
  );
}

// Creates a container object for a dark theme to be given to individual component theme mixins.
@function ruf-dark-theme($primary: ruf-palette($ruf-new-blue), $accent: ruf-palette($ruf-gold), $emphasis: ruf-palette($ruf-light-plum), $warn: ruf-palette($ruf-light-orange), $foreground: $ruf-dark-theme-foreground, $background: $ruf-dark-theme-background) {
  @return (
    primary: $primary,
    accent: $accent,
    emphasis: $emphasis,
    warn: $warn,
    is-dark: true,
    foreground: $foreground,
    background: $background,
  );
}


@mixin ruf-base-theme($theme) {
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $warn: map-get($theme, warn);

  $ruf-link-color: ruf-color($foreground, link) !default;

  a {
    color: $ruf-link-color;
    cursor: pointer;
    text-decoration: none;
  }

  .ruf-foreground-primary, .ruf-icon-primary .mat-icon {
    color: ruf-color($primary);
  }

  .ruf-foreground-primary-dark, .ruf-icon-primary-dark .mat-icon {
    color: ruf-color($primary, darker) !important;
  }

  .ruf-foreground-primary-light, .ruf-icon-primary-light .mat-icon {
    color: ruf-color($primary, lighter);
  }

  .ruf-foreground-accent, .ruf-icon-accent .mat-icon {
    color: ruf-color($accent);
  }

  .ruf-foreground-accent-dark, .ruf-icon-accent-dark .mat-icon {
    color: ruf-color($accent, darker);
  }

  .ruf-foreground-accent-light, .ruf-icon-accent-light .mat-icon {
    color: ruf-color($accent, lighter);
  }

  .ruf-foreground-emphasis, .ruf-icon-emphasis .mat-icon {
    color: ruf-color($emphasis);
  }

  .ruf-foreground-emphasis-dark, .ruf-icon-emphasis-dark .mat-icon {
    color: ruf-color($emphasis, darker);
  }

  .ruf-foreground-emphasis-light, .ruf-icon-emphasis-light .mat-icon {
    color: ruf-color($emphasis, lighter);
  }

  .ruf-foreground-warn, .ruf-icon-warn .mat-icon {
    color: ruf-color($warn);
  }

  .ruf-foreground-warn-dark, .ruf-icon-warn-dark .mat-icon {
    color: ruf-color($warn, darker);
  }

  .ruf-foreground-warn-light, .ruf-icon-warn-light .mat-icon {
    color: ruf-color($warn, lighter);
  }

  .ruf-icon-error .mat-icon {
    color: ruf-color($background, error);
  }

  .ruf-icon-success .mat-icon {
    color: ruf-color($background, success);
  }

  .ruf-background-primary {
    background-color: ruf-color($primary);
    color: ruf-color($primary, default-contrast);
  }

  .ruf-background-primary-dark {
    background-color: ruf-color($primary, darker) !important;
    color: ruf-color($primary, darker-contrast) !important;
  }

  .ruf-background-primary-light {
    background-color: ruf-color($primary, lighter);
    color: ruf-color($primary, lighter-contrast);
  }

  .ruf-background-accent {
    background-color: ruf-color($accent);
    color: ruf-color($accent, default-contrast);
  }

  .ruf-background-accent-dark {
    background-color: ruf-color($accent, darker);
    color: ruf-color($accent, darker-contrast);
  }

  .ruf-background-accent-light {
    background-color: ruf-color($accent, lighter);
    color: ruf-color($accent, lighter-contrast);
  }

  .ruf-background-emphasis {
    background-color: ruf-color($emphasis);
    color: ruf-color($emphasis, default-contrast);
  }

  .ruf-background-emphasis-dark {
    background-color: ruf-color($emphasis, darker);
    color: ruf-color($emphasis, darker-contrast);
  }

  .ruf-background-emphasis-light {
    background-color: ruf-color($emphasis, lighter);
    color: ruf-color($emphasis, lighter-contrast);
  }

  .ruf-background-warn {
    background-color: ruf-color($warn);
    color: ruf-color($warn, default-contrast);
  }

  .ruf-background-warn-dark {
    background-color: ruf-color($warn, darker);
    color: ruf-color($warn, darker-contrast);
  }

  .ruf-background-warn-light {
    background-color: ruf-color($warn, lighter);
    color: ruf-color($warn, lighter-contrast);
  }

  .ruf-background-dark {
    /* Reason for !important: class added by user meant to override existing background.*/
    background-color: rgba(black, 0.18) !important;
  }

  .ruf-background-darker {
    /* Reason for !important: class added by user meant to override existing background.*/
    background-color: rgba(black, 0.40) !important;
  }

  .ruf-background-transparent {
    /* Reason for !important: class added by user meant to override existing background.*/
    background-color: transparent !important;
  }

  .ruf-background-light {
    /* Reason for !important: class added by user meant to override existing background.*/
    background-color: rgba(white, 0.18) !important;
  }

  .ruf-background-lighter {
    /* Reason for !important: class added by user meant to override existing background.*/
    background-color: rgba(white, 0.40) !important;
  }

  .ruf-background-error, .ruf-background-error-light, .ruf-background-error-dark {
    background-color: ruf-color($background, error);
  }

  .ruf-background-white {
    /* Reason for !important: class added by user meant to override existing background.*/
    background-color: rgb(255, 255, 255) !important;
  }

  .ruf-background-success, .ruf-background-success-light, .ruf-background-success-dark {
    background-color: ruf-color($background, success);
  }

  .ruf-background-info, .ruf-background-info-light, .ruf-background-info-dark {
    background-color: ruf-color($background, info);
  }
}

$ruf-breakpoints: (
  xs: 0,
  sm: 600px,
  md: 960px,
  lg: 1280px,
  xl: 1920px
) !default;

@function ruf-breakpoint($name) {
  @return map-get($ruf-breakpoints, $name);
}

$ruf-mqs: (
  xs: '(min-width: #{ruf-breakpoint(xs)}) and (max-width: #{ruf-breakpoint(sm) - 1px})',
  gt-xs: '(min-width: #{ruf-breakpoint(sm)})',
  sm: '(min-width: #{ruf-breakpoint(sm)}) and (max-width: #{ruf-breakpoint(md) - 1px})',
  gt-sm: '(min-width: #{ruf-breakpoint(md)})',
  md: '(min-width: #{ruf-breakpoint(md)}) and (max-width: #{ruf-breakpoint(lg) - 1px})',
  md-landscape: '(min-width: #{ruf-breakpoint(md)}) and (max-width: #{ruf-breakpoint(lg) - 1px}) and (orientation: landscape)',
  gt-md: '(min-width: #{ruf-breakpoint(lg)})',
  lg: '(min-width: #{ruf-breakpoint(lg)}) and (max-width: #{ruf-breakpoint(xl) - 1px})',
  gt-lg: '(min-width: #{ruf-breakpoint(xl)})',
  xl: '(min-width: #{ruf-breakpoint(xl)})',
  gt-xl: '(min-width: #{ruf-breakpoint(xl)})',
  landscape: '(orientation: landscape)',
  portrait: '(orientation: portrait)',
  print: 'print'
);

@mixin if-mq($name) {
  @media #{map-get($ruf-mqs, $name)} { @content; }
}


// transforms a pixel input into rems.
@function ruf-to-rem($size) {
  // using base of 16px since we don't want to adjust if the $ruf-base-font-size is changed
  // if we were using $ruf-base-font-size here, we would lose the purpose of using rems and might as well just use pixels
  $rem-size: $size / 16px;
  @return #{$rem-size}rem;
}

/* define default theme. Can be overridden. */
$theme: ruf-light-theme() !default;

/* root font size for rem */
$ruf-root-font-size: 16px !default;

/* base font size for RUF */
$ruf-base-font-size: ruf-to-rem(14px) !default;

/* the only font-family you should need */
$ruf-font-family: Roboto, Arial, sans-serif !default;

// vertical factor, in rem
$ruf-vunit: 1 !default;

// horizontal factor, in rem
$ruf-hunit: 1 !default;

// global
$ruf-global-padding-horizontal: ruf-to-rem(10px) !default;

// keep this at the end
@if mixin-exists(ruf-override-core-variables) {
  @include ruf-override-core-variables();
}


@function ruf-map-get($map, $val, $default: ()) {
  @if map-has-key($map, $val) {
    @return map-get($map, $val);
  } @else {
    @return $default;
  }
}

@function recursive-map-merge($map1, $map2, $config: () ) {
  @if (type-of($map1) == map or (type-of($map1) == list and length($map1) == 0)) and (type-of($map2) == map or (type-of($map2) == list and length($map2) == 0)) {
    $result: $map1;
    @each $key, $value in $map2 {
      @if (type-of(map-get($result, $key)) == map and type-of($value) == map) {
        $result: map-merge($result, ($key: recursive-map-merge(map-get($result, $key), $value)));
      } @else if (map-get($config, 'merge-lists') and type-of(map-get($result, $key)) == list and type-of($value) == list) {
        $result: map-merge($result, ($key: join(map-get($result, $key), $value)));
      } @else {
        $result: map-merge($result, ($key: $value));
      }
    }
    @return $result;
  } @else {
    @return null;
  }
}



// Utility for fetching a nested value from a typography config.
@function _ruf-get-type-value($config, $level, $name) {
  @return map-get(map-get($config, $level), $name);
}

// Gets the font size for a level inside a typography config.
@function ruf-font-size($config, $level) {
  @return _ruf-get-type-value($config, $level, font-size);
}

// Gets the line height for a level inside a typography config.
@function ruf-line-height($config, $level) {
  @return _ruf-get-type-value($config, $level, line-height);
}

// Gets the font weight for a level inside a typography config.
@function ruf-font-weight($config, $level) {
  @return _ruf-get-type-value($config, $level, font-weight);
}

// Gets the font-family from a typography config and removes the quotes around it.
@function ruf-font-family($config, $level: null) {
  $font-family: map-get($config, font-family);

  @if $level != null {
    $font-family: _ruf-get-type-value($config, $level, font-family);
  }

  @return if($font-family == null, $font-family, unquote($font-family));
}

// Converts a typography level into CSS styles.
@mixin ruf-typography-level-to-styles($config, $level) {
  $font-size: ruf-font-size($config, $level);
  $font-weight: ruf-font-weight($config, $level);
  $line-height: ruf-line-height($config, $level);
  $font-family: ruf-font-family($config, $level);

  // If any of the values are set to `inherit`, we can't use the shorthand
  // so we fall back to passing in the individual properties.
  @if ($font-size == inherit or $font-weight == inherit or $line-height == inherit or $font-family == inherit or $font-size == null or $font-weight == null or $line-height == null or $font-family == null) {
    font-family: $font-family;
    font-size: $font-size;
    font-weight: $font-weight;
    line-height: $line-height;
  } @else {
    // Otherwise use the shorthand `font` to represent a typography level, because it's the the
    // least amount of bytes. Note that we need to use interpolation for `font-size/line-height`
    // in order to prevent SASS from dividing the two values.
    font: $font-weight #{$font-size}/#{$line-height} $font-family;
  }
}

@function ruf-typography-level(
  $font-size,
  $line-height: $font-size,
  $font-weight: 400,
  $font-family: null) {

  @return (
    font-family: $font-family,
    font-size: $font-size,
    font-weight: $font-weight,
    line-height: $line-height

  );
}

//Provide typography config for the ruf-theming
@function ruf-typography-config( $config : null) {

  $ruf-default-typography-config : (
    // used hardcoded string of fonts here because '$ruf-font-family' variable 
    // has a comma separated value which can not be used in this map directly and can not be used 
    // in 'quote' function because 'quote'/'unquote' function accepts '$string' as a parameter.

    font-family:        'Roboto, Arial, sans-serif',
    display-4:          ruf-typography-level(112px, 112px, 300),
    display-3:          ruf-typography-level(56px, 56px, 400),
    display-2:          ruf-typography-level(45px, 48px, 400),
    display-1:          ruf-typography-level(34px, 40px, 400),
    headline:           ruf-typography-level(24px, 32px, 400),
    title:              ruf-typography-level(20px, 32px, 500),
    subheading-2:       ruf-typography-level(16px, 28px, 400),
    subheading-1:       ruf-typography-level(14px, 24px, 400),
    body-2:             ruf-typography-level(14px, 24px, 500),
    body-1:             ruf-typography-level(14px, 20px, 400),
    caption:            ruf-typography-level(12px, 20px, 400),

    button:             ruf-typography-level(14px, 1.2, 500),
    input:              ruf-typography-level( inherit, 1.125, 400),
    bold:               ruf-typography-level($font-size: null, $font-weight: 700),

    // Ruf specific
    dialog-title:       ruf-typography-level( 18px, 1.125, 400),
    expansion-panel :   ruf-typography-level(15px, 20px, 700),
    tab-label :         ruf-typography-level($font-size: 0.875rem),
    banner-brand-title: ruf-typography-level( ruf-to-rem($ruf-vunit * 23px)),
    ellipsis :          ruf-typography-level(inherit, 16px),
    sitemap-title: ruf-typography-level($font-size: 14px, $font-weight: bold),
    dynamic-menubar: ruf-typography-level($font-size: null, $line-height: 44px),
    //Ruf Ngx Charts Specific
    chart: ruf-typography-level(11px, 32px, 500, 'Roboto'),
    chart-label: ruf-typography-level($font-size: 14px, $font-weight: bold)
  );


  //merge the base and custom typography configuration
  $complete-config:  if( $config == null,  $ruf-default-typography-config , map-merge( $ruf-default-typography-config, $config ) );
  //extract font-family from the config
  $font-family: map-get($complete-config, font-family);

  $typography-config: map-remove($complete-config, font-family);

  // Add font family to each level if font family is not define for that level.
  @each $key, $level in $typography-config {
   @if map-get($level, font-family) == null {
     $new-level: map-merge($level, (font-family: $font-family));
     $typography-config: map-merge($typography-config, ($key: $new-level));
    }
  }

  // Add the base font family to the config.
  @return map-merge($typography-config, (font-family: $font-family));
}



$fis-logo-white: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAmCAQAAADT0yVVAAAB10lEQVRYw+2XMYrbQBSGfwhsYTAYFlIsBFQFtggMqEonSG0wbLWdKtWGtCl0A9WqfAQdQRcQ6Ag6go/wpdB4LG1EpLFkcIj+V8nSPH9I/7z3RnLiE6+EGDaSxDMxCW88SRI/yMmJ7ZM5FRV7SSKgAc4YLSleCAkJeZUk3khISAglNuQ2vkrsqdqQJE60Ku4J896B+dKDee/BFBamXBZmgyEk5EWSCElIiHmWJH6Sk/OLjcSWkoqKVJKILEysZcUTn1vHWNd8Y+uuDN8v99iyJ3J3Ao4LO2bVPyICMmqm6Hx1jN1PNbuBfCfOTFPWXbgjw0dlx9itog8o8WQQALooNX5K3dpoCMYhTlXTf9H2RzLS0Th2/nYYpnD50kkRXBYeHMrxBqcNw7QacNJYunpODR2CubkqE8xrdIMw5sY37ZIdloOR7E7yHSy6yTAUlH+Jw2SY07UIjETWWemSmd6uGqsGYzA7rypTWqNfkn3Y4jNhJAyNB079J8zYZ4qnw9gqXIx8pKZXRrswyxn4hvXNA8BIl674GDDpw8Bcm/QdYTBEEyJ2zai4G4z3CAFmCZjB4YqjJ0rcrZUzjmDUQNMfFgg8KnDR62BzTz1uNPJ3zXreWrVq1f+r30fKa92z5kFLAAAAAElFTkSuQmCC';
$fis-logo-green: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAAAmCAYAAAB52u3eAAAB+klEQVR4AWLABnqPOQLaMQNNx4EoDA9LEUooi7IULMUyBCwQFkApBQUGFEBYgEXeIAAK+gh5hLxAySPkEfIIsz8Oe4xM293kRLr3/HyQI3eO796cmbmfwB5kwIKE1TbAgQs4gRWr/QBXwhkWenYnDuz5DnTAgx5Ys9SguS3IGHtWO4ELI6PnCbgGfKXaAdw57OfdgGfU7yrmHBHz5YGY8wMxdSCmWbKYBFgmZstqGZPiwIbVfjIpv0BCz9egYWJK9k4eiHEGWbKcFfjM50swZ76B9UDNgu/8PSbnAPKBd3agANb899FoNPTNV6AFfiL6ofkS7EwtSF/s7wZ64Cekii2YkhAvRBMZ1p6RP5HiphbCiUlpgRekHFg3j4mJSRSki/45B3SgAuUEFAYZKaYe6K+ckF244HFASmGEMkKMZ7QglW6uHXH6FBcz/wmZJrzAJU5CTDhfirkbOy5ODCXYjXpgZ2+MfkM1aP6Ro4CY29ARYCQVyF9pzPIdYAwCYlLBM0wD0mhjBlmoGD5rOiE57XMx4z8lJyGGn4BH9QcigsuomEUN3/nX71QMJbwfqpg/PZQqJnJ5fnsxtCnkE+G4FKJ+OzEkxQtjlyLG/oWYQliKi50mGzN/+O2+A+mjC6/QybeO3rvCwtwJ/0k005yxRqPRaDQajUbzMfIbfWY+xTDY8BMAAAAASUVORK5CYII=';

@function ruf-logo($color) {
  @if (lightness($color) > 50) {
    //light backgound, use green logo
    @return url($fis-logo-green);
  } @else {
    //dark backgound, use white logo
    @return url($fis-logo-white);
  }
}

@mixin ruf-banner-theme($theme) {
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $warn: map-get($theme, warn);


  $ruf-banner-background: ruf-color($background, app-bar) !default;
  $ruf-banner-color: ruf-color($foreground, text) !default;

  ruf-banner {
    background: $ruf-banner-background;
    /*border-bottom-color: ruf-color($foreground, subtle-divider);*/
    box-shadow: 1px 2px 3px 0px rgba(0, 0, 0, 0.25);
    color: $ruf-banner-color;
  }

  ruf-banner-brand {
    .ruf-toolbar-separator {
        border-left-color: inherit; // takes the foreground color of the parent element
        opacity: 0.3;
     }
  }

  .ruf-banner-brand-logo.fis-logo {
    background-repeat: no-repeat;
  }

  .fis-logo-white .ruf-banner-brand-logo.fis-logo {
    // force white fis logo
    background-image: url($fis-logo-white) !important;
  }

  .fis-logo-green .ruf-banner-brand-logo.fis-logo {
    // force green fis logo
    background-image: url($fis-logo-green) !important;
  }

  .ruf-banner-toolbar .ruf-banner-brand-logo.fis-logo {
    background-image: ruf-logo($ruf-banner-background);
  }

  .ruf-banner-toolbar.ruf-primary .ruf-banner-brand-logo.fis-logo {
    background-image: ruf-logo(ruf-color($primary));
  }

  .ruf-banner-toolbar.ruf-accent .ruf-banner-brand-logo.fis-logo {
    background-image: ruf-logo(ruf-color($accent));
  }

  .ruf-banner-toolbar.ruf-emphasis .ruf-banner-brand-logo.fis-logo {
    background-image: ruf-logo(ruf-color($emphasis));
  }

  .ruf-banner-toolbar.ruf-warn .ruf-banner-brand-logo.fis-logo {
    background-image: ruf-logo(ruf-color($warn));
  }

}



@mixin ruf-banner-typography($config) {
  .ruf-banner-header {
    font-family: ruf-font-family($config);
  }
  .ruf-banner-brand-title {
    font-size: ruf-font-size($config, banner-brand-title);
    font-weight: ruf-font-weight($config, banner-brand-title);
  }
}



@mixin ruf-card-theme($theme) {
  $primary: map-get($theme, primary);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-card-title-color: ruf-color($primary) !default;
  $ruf-card-subtitle-color: ruf-color($foreground, secondary-text) !default;
  $ruf-card-toggle-color: ruf-color($foreground, secondary-text) !default;
  $ruf-card-canvas-color: ruf-color($background, card-canvas) !default;

  .ruf-card {

    &:not([class*=mat-elevation-z]) {
      box-shadow: 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.14), 0 2px 1px -1px rgba(0, 0, 0, 0.12);
    }

    .ruf-card-title {
      color: $ruf-card-title-color;
    }

    .ruf-card-subtitle, .ruf-card-metric-description {
      color: $ruf-card-subtitle-color;
    }

    .ruf-card-expand {
      color: $ruf-card-toggle-color;
    }
  }

  .ruf-card-canvas {
    background-color: $ruf-card-canvas-color;
  }
}

@mixin ruf-card-typography($config) {
  .ruf-card {
    font-family:  ruf-font-family($config);
  }
  .ruf-card.mat-card {
    .ruf-card-title, .ruf-card-metric {
      font-size: ruf-font-size($config, title);
    }

    .ruf-card-subtitle, .ruf-card-metric-description {
      font-size: ruf-font-size($config, caption);
    }
  }
}



@mixin _ruf-dynamic-menubar-color-from-palette($color) {
  .mat-tab-group .mat-tab-list .mat-ink-bar {
      background-color: ruf-color($color);
    }

    ruf-menu-label {
      .ruf-close.mat-icon-button[fisStyle] {
        &:hover, &.cdk-keyboard-focused {
          background-color: ruf-color($color);
          color: ruf-color($color, default-contrast);
          transition: background-color 0.2s ease-in 0s, color 0.2s ease-in 0s;
        }
        }
    }
}
@mixin ruf-dynamic-menubar-theme($theme) {

  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-dynamic-menubar-highlight-color: ruf-color($background, hover) !default;
  $ruf-dynamic-menubar-item-active-color: ruf-color($accent) !default;

  ruf-dynamic-menubar {
    .mat-tab-group {
      .mat-tab-labels {
        >.mat-tab-label {
          color: currentColor; /* make sure the label uses the parent's color */
          opacity: 0.85; /* Make sure labels have just a little less opacity to further differenciate activation */
        }

        .mat-tab-label {
          &:not(.mat-tab-disabled) {
            &:hover, &.cdk-keyboard-focused {
              background-color: $ruf-dynamic-menubar-highlight-color;
             }
          }
         }

        >.mat-tab-label-active {
          opacity: 1; /* Make sure active labels have have full opcity */
        }
      }

      .mat-tab-list .mat-ink-bar {
        background-color: $ruf-dynamic-menubar-item-active-color;
      }
    }


    ruf-menu-label {
      .ruf-close.mat-icon-button[fisStyle] {
        &:hover, &.cdk-keyboard-focused {
        background-color: ruf-color($accent);
        color: ruf-color($accent, default-contrast);
        transition: background-color 0.2s ease-in 0s, color 0.2s ease-in 0s;
      }
    }
    }

    &.ruf-default {
      @include _ruf-dynamic-menubar-color-from-palette($accent)
    }

    &.ruf-primary {
      @include _ruf-dynamic-menubar-color-from-palette($primary)
    }

    &.ruf-accent {
      @include _ruf-dynamic-menubar-color-from-palette($accent)
    }

    &.ruf-emphasis {
      @include _ruf-dynamic-menubar-color-from-palette($emphasis)
    }

    &.ruf-dynamic-tabs {
      @include ruf-tabs-theme($theme);
    }
  }

}

@mixin ruf-dynamic-menubar-typography($config) {
  ruf-dynamic-menubar {
    font-family: ruf-font-family($config);

    &.ruf-dynamic-menubar-flex-height .mat-tab-labels > .mat-tab-label {
      line-height: inherit;
    }

    .mat-tab-labels > .mat-tab-label {
      line-height: ruf-line-height($config, dynamic-menubar);
    }
  }
}

@mixin ruf-tabs-theme($theme) {
  $hover: rgba(0, 0, 0, 0.345);
  $highlight: rgba(0, 0, 0, 0.12);

  ruf-menu-label {
    .ruf-close.mat-icon-button[fisStyle] {
      &:hover, &.cdk-keyboard-focused {
        background-color: $hover;
        color: inherit;

      }
    }
  }

  .mat-tab-header-pagination:not(.mat-tab-header-pagination-disabled):hover {
    background-color: $hover;
  }

  .mat-tab-list .mat-ink-bar {
    background: none;
  }
  .mat-tab-group {
    .mat-tab-labels {
      .mat-tab-label {
        &:hover,
        &.cdk-keyboard-focused {
          background-color: $hover;
        }
      }
      >.mat-tab-label {
        background-color: $highlight;
      }
      >.mat-tab-label-active {
        background: none;
      }
    }
  }
}




@mixin ruf-sidemenu-item-color($highlight-color, $color: null) {
  $class: '.ruf-menu-item';
  #{$class} {
    @if $color {
      color: $color;
    } @else {
      color: inherit;
    }
    &:hover, &:focus, &.ruf-active {
          background: $highlight-color;
     }
  }
  .ruf-sidemenu-children {
    background: $highlight-color;
    #{$class} {
       &:hover, &:focus {
         background: transparent;
      }
    }
  }
}


@mixin ruf-sidemenu-theme($theme) {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-sidemenu-highlight-color: rgba(255, 255, 255, 0.1) !default;

  ruf-sidemenu, .ruf-sidemenu-popup-backdrop+* .mat-menu-panel {

    &.ruf-primary .ruf-menubar-item-active {
      &:not(.ruf-active) {
        border-bottom-color: ruf-color($primary);
        border-right-color: ruf-color($primary);
      }
    }

    &.ruf-accent .ruf-menubar-item-active, .ruf-menubar-item-active {
      &:not(.ruf-active) {
        border-bottom-color: ruf-color($accent);
        border-right-color: ruf-color($accent);
      }
    }

    &.ruf-emphasis .ruf-menubar-item-active {
      &:not(.ruf-active) {
        border-bottom-color: ruf-color($emphasis);
        border-right-color: ruf-color($emphasis);
      }
    }


    &.ruf-menubar-inkbar-start {
      &.ruf-primary .ruf-menubar-item-active {
        &:not(.ruf-active) {
          border-bottom-color: transparent;
          border-left-color: ruf-color($primary);
          border-right-color: transparent;
          border-top-color: ruf-color($primary);
        }
      }

      &.ruf-accent .ruf-menubar-item-active, .ruf-menubar-item-active {
        &:not(.ruf-active) {
          border-bottom-color: transparent;
          border-left-color: ruf-color($accent);
          border-right-color: transparent;
          border-top-color: ruf-color($accent);
        }
      }

      &.ruf-emphasis .ruf-menubar-item-active {
        &:not(.ruf-active) {
          border-bottom-color: transparent;
          border-left-color: ruf-color($emphasis);
          border-right-color: transparent;
          border-top-color: ruf-color($emphasis);
        }
      }
    }

  }

  ruf-sidemenu {
    background: inherit;
    box-shadow: inset -7px 0 9px -7px ruf-color($background, contrast, 0.19);
    color: inherit;

    &:not([light]) {
      @include ruf-sidemenu-item-color(ruf-color($background, sidemenu-focus), ruf-color($foreground, text));
    }

    &[light] {
      @include ruf-sidemenu-item-color($ruf-sidemenu-highlight-color);
    }
  }
}

@mixin ruf-sidemenu-typography($config) {
   ruf-sidemenu {
     .ruf-menu-item {
       font-size: ruf-font-size($config, subheading-2);
     }

     .ruf-sidemenu-children  .ruf-menu-item {
       font-size: ruf-font-size($config,  subheading-1);
     }
   }
}


@mixin ruf-dynamic-sidemenu-theme($theme) {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-dynamic-sidemenu-highlight-color: rgba(255, 255, 255, 0.1) !default;

  ruf-dynamic-sidemenu {
   &:not([light]) ruf-sidemenu {
      @include ruf-sidemenu-item-color(ruf-color($background, sidemenu-focus), ruf-color($foreground, text));
    }

    &[light] ruf-sidemenu {
      @include ruf-sidemenu-item-color($ruf-dynamic-sidemenu-highlight-color);
    }
  }

  .ruf-sidemenu-popup-backdrop +* .mat-menu-content {
    @include ruf-sidemenu-item-color($ruf-dynamic-sidemenu-highlight-color);
    background: $ruf-dynamic-sidemenu-highlight-color;

  }
}

@mixin ruf-dynamic-sidemenu-typography($config) {
  ruf-dynamic-sidemenu {
    font-family: ruf-font-family($config);
  }
}




@mixin ruf-menu-label-theme($theme) {
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);


  .ruf-cust-menu {
    .mat-menu-content {
      border-color: ruf-color($foreground, subtle-divider);
      box-shadow: 1px 2px 3px 0px ruf-color($foreground, shadow);
    }
  }
}


@mixin ruf-menu-label-typography($config) {
  .ruf-cust-menu {
    font-family: ruf-font-family($config);
    .mat-menu-content {
     .mat-menu-item {
        font-size: ruf-font-size($config, subheading-1);
      }
    }
  }
}



@mixin ruf-menubar-theme($theme) {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-menubar-highlight-color: ruf-color($background, hover) !default;
  $ruf-menubar-item-active-color: ruf-color($accent) !default;

  ruf-menubar {
    &.ruf-primary .ruf-menubar-item-active {
      border-bottom-color: ruf-color($primary);
      border-right-color: ruf-color($primary);
    }

    &.ruf-accent .ruf-menubar-item-active {
      border-bottom-color: ruf-color($accent);
      border-right-color: ruf-color($accent);
    }

    &.ruf-emphasis .ruf-menubar-item-active {
      border-bottom-color: ruf-color($emphasis);
      border-right-color: ruf-color($emphasis);
    }

    .ruf-menubar-item-active {
      border-bottom-color: $ruf-menubar-item-active-color;
      border-right-color: $ruf-menubar-item-active-color;
    }
  }

  ruf-menubar.ruf-menubar-inkbar-start {
    &.ruf-primary .ruf-menubar-item-active {
      border-bottom-color: transparent;
      border-left-color: ruf-color($primary);
      border-right-color: transparent;
      border-top-color: ruf-color($primary);
    }

    &.ruf-accent .ruf-menubar-item-active {
      border-bottom-color: transparent;
      border-left-color: ruf-color($accent);
      border-right-color: transparent;
      border-top-color: ruf-color($accent);
    }

    &.ruf-emphasis .ruf-menubar-item-active {
      border-bottom-color: transparent;
      border-left-color: ruf-color($emphasis);
      border-right-color: transparent;
      border-top-color: ruf-color($emphasis);
    }

    .ruf-menubar-item-active {
      border-bottom-color: transparent;
      border-left-color: $ruf-menubar-item-active-color;
      border-right-color: transparent;
      border-top-color: $ruf-menubar-item-active-color;
    }
  }

  ruf-menubar-item, [rufMenubarItem] {
    color: inherit;
  }

  ruf-menubar-item:hover, [rufMenubarItem]:hover {
    background-color: $ruf-menubar-highlight-color;
  }

  ruf-menubar-item:focus, [rufMenubarItem]:focus {
    background-color: $ruf-menubar-highlight-color;
  }

}


@mixin ruf-menubar-typography($config) {
  .ruf-menubar-layout {
    font-family: ruf-font-family($config);
  }
}




@mixin _ruf-toolbar-color($background, $foreground) {
  background: $background;
  color: $foreground;
}

@mixin _ruf-toolbar-color-from-palette($palette) {
  @include _ruf-toolbar-color(ruf-color($palette), ruf-color($palette, default-contrast));
}

@mixin _ruf-toolbar-separator-color($color) {
  .ruf-toolbar-separator {
    border-left-color: $color;
    opacity: 1.0; // set default value when ruf-toolbar classes like ruf-default, ruf-primary etc. are used.
  }
}

@mixin _ruf-toolbar-separator($palette, $opacity: 0.5) {
  @include _ruf-toolbar-separator-color(ruf-color($palette, default-contrast, $opacity));
}

@mixin ruf-toolbar-theme($theme) {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);

  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-toolbar-background: ruf-color($background, app-bar) !default;
  $ruf-banner-color: ruf-color($foreground, text) !default;

  ruf-toolbar {

    // default background and foreground colors are inherited

    &.ruf-default {
      @include _ruf-toolbar-color($ruf-toolbar-background, $ruf-banner-color);
      @include _ruf-toolbar-separator(ruf-palette(ruf-palette-from-color($ruf-toolbar-background)), 0.3);
    }

    &.ruf-primary {
      @include _ruf-toolbar-color-from-palette($primary);
      @include _ruf-toolbar-separator($primary);
    }

    &.ruf-accent {
      @include _ruf-toolbar-color-from-palette($accent);
      @include _ruf-toolbar-separator($accent);
    }

    &.ruf-emphasis {
      @include _ruf-toolbar-color-from-palette($emphasis);
      @include _ruf-toolbar-separator($emphasis);
    }

    .ruf-toolbar-separator {
      border-left-color: inherit; // takes the foreground color of the parent element
      opacity: 0.3;
    }

    a {
      color: inherit;
    }
  }
}


@mixin ruf-toolbar-typography($config) {
  ruf-toolbar {
    font-family: ruf-font-family($config);
  }
}



@mixin _ruf-footer-color($palette) {
  background: ruf-color($palette);
  color: ruf-color($palette, default-contrast);
}

@mixin ruf-footer-theme($theme) {
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-footer-background: ruf-color($background, footer) !default;
  $ruf-footer-color: ruf-color($foreground, text) !default;

  ruf-footer {
    background: $ruf-footer-background;
    border-top-color: ruf-color($foreground, subtle-divider);
    color: $ruf-footer-color;
  }

}


@mixin ruf-footer-typography($config) {
  ruf-footer {
    font-family: ruf-font-family($config);
  }
}



@mixin ruf-app-canvas-theme($theme) {
  $background: map-get($theme, background);
  $ruf-app-canvas-background: ruf-color($background, app-canvas) !default;

  ruf-app-canvas {
    background: $ruf-app-canvas-background;
  }
}


@mixin ruf-app-canvas-typography($config) {
  ruf-app-canvas {
    font-family: ruf-font-family($config);
  }
}



@mixin ruf-page-header-theme($theme) {
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);
  $ruf-page-header-background-icon: ruf-color($background, icon) !default; // remove hard coded color

  ruf-page-header {

    ruf-page-header-icon {
      background: $ruf-page-header-background-icon;
    }
  }
}

// sass-lint:disable-block no-empty-rulesets
@mixin ruf-page-header-typography($config) {
  ruf-page-header {
    .ruf-pageheader-toolbar>.ruf-toolbar-rows {
      ruf-page-header-title,
      .ruf-page-header-metric {
        font-size: ruf-font-size($config, title);
        font-weight: ruf-font-weight($config, headline);
      }
      ruf-page-header-description,
      .ruf-page-header-metric-description {
        font-size: ruf-font-size($config, caption);
      }
    }
  }
}



@mixin ruf-navbar-theme($theme) {
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-navbar-background: ruf-color($background, nav-bar) !default;
  $ruf-navbar-color: ruf-color($foreground, text) !default;

  ruf-navbar {
    background: $ruf-navbar-background;
    color: $ruf-navbar-color;
  }
}

// sass-lint:disable-block no-empty-rulesets
@mixin ruf-navbar-typography($config) {

}



@mixin ruf-dialog-panel-theme($theme) {
  $primary: map-get($theme, primary);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-dialog-panel-background-color: ruf-color($background, dialog) !default;
  $ruf-dialog-dark-backdrop-color: ruf-color($foreground, base) !default;

  .ruf-dialog-panel {
    background: $ruf-dialog-panel-background-color;
  }

  .ruf-dialog-header {
    color: ruf-color($primary);
    .mat-icon-button {
      color: ruf-color($foreground, soft-link);
    }
  }

  .ruf-dialog-separator {
    border-color: ruf-color($foreground, subtle-divider);
  }
}


@mixin ruf-dialog-panel-typography($config) {
  .ruf-dialog-panel {
    font-family:  ruf-font-family($config);
  }
  .ruf-dialog-header {
    .ruf-dialog-header-bar {
      ruf-dialog-header {
        font-size: ruf-font-size($config, dialog-title);
        font-weight: ruf-font-weight($config, dialog-title);
      }
    }
  }
}



@mixin ruf-megamenu-theme($theme) {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-megamenu-color: ruf-color($foreground, text) !default;
  $ruf-sitemap-container: ruf-color($background, card);
  $ruf-side-megamenu-background: ruf-color($background, side-megamenu);
  $ruf-menubar-highlight-color: lighten($ruf-side-megamenu-background, 5%) !default;
  $ruf-scrollbar-color: darken($ruf-side-megamenu-background, 20%);
  $ruf-search-item-active-color: ruf-color($accent) !default;

  ruf-megamenu {
    background: $ruf-side-megamenu-background;
    color: $ruf-megamenu-color;

    ruf-sidemenu {
    ruf-sidemenu-item.ruf-menu-item {
      &:hover {
        background-color: $ruf-menubar-highlight-color;
      }
    }
    .ruf-menubar-item-active {
      background-color: $ruf-menubar-highlight-color;
      &:focus {
        background-color: $ruf-menubar-highlight-color;
      }
    }

    }
  }

  ruf-megamenu::-webkit-scrollbar {
    background-color: $ruf-side-megamenu-background;
  }
  ruf-megamenu::-webkit-scrollbar-thumb {
    background-color: ruf-color($primary);
  }

  .ruf-content-heading {
    color: $ruf-megamenu-color;
  }

  ruf-megamenu-search {
    .fis-icon-close {
      &:hover {
        color: ruf-color($primary);
      }
    }

    .fis-search-input-container {
      border-left-color: transparent;
      &:hover {
        background-color: $ruf-menubar-highlight-color;
      }
    }
    .ruf-focus {
      background-color: $ruf-menubar-highlight-color;
      border-left-color: $ruf-search-item-active-color;
    }
  }


  .ruf-sitemap-container {
    background-color: $ruf-sitemap-container;
    border-color: $ruf-menubar-highlight-color;
  }
  .ruf-sidemenu-container::-webkit-scrollbar {
    background-color: $ruf-menubar-highlight-color;
  }

  .ruf-sidemenu-container::-webkit-scrollbar-thumb {
    background-color: ruf-color($primary);
  }


}

@mixin ruf-megamenu-typography($config) {
  ruf-megamenu {
    font-family: ruf-font-family($config);
  }
  ruf-megamenu-search {
    .fis-search-input-container {
      input {
        font-family: ruf-font-family($config);
      }
    }
  }
}




@mixin ruf-dropdown-panel-theme($theme) {
  $primary: map-get($theme, primary);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  $ruf-dropdown-panel-background-color: ruf-color($background, dialog) !default;

  .ruf-dropdown-panel-container {
    background: $ruf-dropdown-panel-background-color;
    box-shadow: ruf-to-rem(0px) ruf-to-rem(3px) ruf-to-rem(1px) ruf-to-rem(-2px) rgba(0, 0, 0, 0.2), ruf-to-rem(0px) ruf-to-rem(2px) ruf-to-rem(2px) ruf-to-rem(0px) rgba(0, 0, 0, 0.14), ruf-to-rem(0px) ruf-to-rem(1px) ruf-to-rem(5px) ruf-to-rem(0px) rgba(0, 0, 0, 0.12);
  }

  .ruf-popover-menu {
    border-color: ruf-color($primary);
  }

  .ruf-dropdown-panel-wrapper {
    background: ruf-color($background, 'hover');
  }

  .center-arrow-up:after, .center-arrow-up:before,
  .center-arrow-down:after, .center-arrow-down:before,
  .left-arrow-up:after, .left-arrow-up:before,
  .left-arrow-center:after, .left-arrow-center:before,
  .left-arrow-down:after, .left-arrow-down:before,
  .right-arrow-up:after, .right-arrow-up:before,
  .right-arrow-center:after, .right-arrow-center:before,
  .right-arrow-down:after, .right-arrow-down:before {
    border-color: transparent;
  }

  .center-arrow-up:after, .left-arrow-up:after, .right-arrow-up:after  {
    border-bottom-color: $ruf-dropdown-panel-background-color;
  }
  .center-arrow-up:before, .left-arrow-up:before, .right-arrow-up:before {
    border-bottom-color: ruf-color($primary);
  }

  .center-arrow-down:after, .left-arrow-down:after, .right-arrow-down:after {
    border-top-color: $ruf-dropdown-panel-background-color;
  }
  .center-arrow-down:before, .left-arrow-down:before, .right-arrow-down:before {
    border-top-color: ruf-color($primary);
  }

  .left-arrow-center:after {
    border-left-color: $ruf-dropdown-panel-background-color;
  }
  .left-arrow-center:before {
    border-left-color: ruf-color($primary);
  }

  .right-arrow-center:after {
    border-right-color: $ruf-dropdown-panel-background-color;
  }
  .right-arrow-center:before {
    border-right-color: ruf-color($primary);
  }
}

@mixin ruf-dropdown-panel-typography($config) {
  .ruf-dropdown-panel-container {
    font-family: ruf-font-family($config);
    font-size: ruf-font-size($config, subheading-1);
  }
}



@mixin ruf-sitemap-theme($theme) {
  $primary: map-get($theme, primary);
  $foreground: map-get($theme, foreground);
  $ruf-sitemap-list-item-color: ruf-color($primary);

  ruf-sitemap {
    color: inherit;

    ul.ruf-sitemap-children {
      .ruf-title {
        color: inherit;
      }
      li {
        color: $ruf-sitemap-list-item-color;
        a {
          color: ruf-color($foreground, text);
        }
      }
    }

  }

  ruf-sitemap::-webkit-scrollbar-thumb {
    background-color: ruf-color($primary);
  }
  ruf-sitemap::-webkit-scrollbar-button {
    display: none;
  }
}


@mixin ruf-sitemap-typography($config) {
  ruf-sitemap {
    font-family: ruf-font-family($config);
    .ruf-sitemap-parent {
      .ruf-title {
        font-size: ruf-font-size($config, sitemap-title);
        font-weight: ruf-font-weight($config, sitemap-title);
      }

      ul {
        .ruf-title, li {
          font-size: ruf-font-size($config, caption);
        }
      }
    }
  }
}



@mixin ruf-statusbar-theme($theme) {
  $primary: map-get($theme, primary);
  $accent: map-get($theme, accent);
  $emphasis: map-get($theme, emphasis);
  $warn: map-get($theme, warn);
  $background: map-get($theme, background);

  $theme-colors: (
    primary: $primary,
    accent: $accent,
    emphasis: $emphasis,
    warn: $warn,
    success: ruf-palette-from-color( ruf-color($background, 'success')),
    error: ruf-palette-from-color( ruf-color($background, 'error')),
    info: ruf-palette-from-color( ruf-color($background, 'info')),
  );

  ruf-statusbar {
    // set border colors
    @each $name, $color in $theme-colors {
      &.ruf-#{$name} {
          background-color: ruf-color($color, 50);
          border-left-color:  ruf-color($color, 500);
          color: ruf-contrast($color, 50);
        & .ruf-statusbar-detail {
             .ruf-statusbar-description {
              background-color: ruf-color($color, 50);
            }
          }
        }
    }
  }
}


@mixin ruf-statusbar-typography($config) {
  ruf-statusbar {
    font-family:  ruf-font-family($config);
    .ruf-statusbar-title {
      font-size: ruf-font-size($config, subheading-1);
      font-weight: ruf-font-weight($config, bold);
    }
    .ruf-statusbar-subtitle {
      font-size: ruf-font-size($config, subheading-1);
    }
    .ruf-statusbar-detail {
      font-size: ruf-font-size($config, subheading-1);
    }
  }
}



@mixin ruf-segment-theme($theme) {
    $primary: map-get($theme, primary);
    $accent: map-get($theme, accent);
    $emphasis: map-get($theme, emphasis);
    $background: map-get($theme, background);
    $foreground: map-get($theme, foreground);
    $ruf-segment-active-item-color: ruf-color($primary) !default;
    $ruf-segment-hover-color: ruf-color($background, hover) !default;
    $color: ruf-color($foreground, text) !default;

    ruf-dynamic-segment {
        .mat-button-toggle-selected {
            background-color: $ruf-segment-active-item-color !important;
            border-color: $ruf-segment-active-item-color !important;
            color: $color !important;

            &.segment-clip {
                &::after {
                    border-top-color: $ruf-segment-active-item-color;
                }
            }
        }

        .segment-item {
            &:hover {
                background-color: $ruf-segment-hover-color;
            }

            &:focus {
                background-color: $ruf-segment-hover-color;
            }
        }
    }
}

@mixin ruf-segment-typography($config) {
  ruf-dynamic-menubar {
    font-family: ruf-font-family($config);
  }
}



@mixin ruf-ellipsis-theme($theme) {
  $primary: map-get($theme, primary);
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  ruf-ellipsis {
    background-color: inherit;
    & div, span {
      background-color: inherit;
    }
  }
}


@mixin ruf-ellipsis-typography($config) {
  ruf-ellipsis {
    font-family: ruf-font-family($config);
    line-height: ruf-to-rem(ruf-line-height($config, 'ellipsis'));
  }
}



@mixin ruf-slide-panel-theme($theme) {
  $background: map-get($theme, background);
  $foreground: map-get($theme, foreground);

  ruf-side-panel {
    .ruf-side-panel-container {
        background-color: ruf-color($background, nav-bar);
        border-color: ruf-color($foreground, shadow, 0.16);
    }
  }
}

// sass-lint:disable-block no-empty-rulesets
@mixin ruf-slide-panel-typography($config) {

}


@mixin ruf-shell-typography($config) {
  $typography-config : ruf-typography-config($config);

  // include each component theme mixins here
  @include ruf-toolbar-typography($typography-config);
  @include ruf-banner-typography($typography-config);
  @include ruf-dynamic-menubar-typography($typography-config);
  @include ruf-dynamic-sidemenu-typography($typography-config);
  @include ruf-menubar-typography($typography-config);
  @include ruf-sidemenu-typography($typography-config);
  @include ruf-footer-typography($typography-config);
  @include ruf-app-canvas-typography($typography-config);
  @include ruf-page-header-typography($typography-config);
  @include ruf-navbar-typography($typography-config);
  @include ruf-dialog-panel-typography($typography-config);
  @include ruf-megamenu-typography($typography-config);
  @include ruf-menu-label-typography($typography-config);
  @include ruf-dropdown-panel-typography($typography-config);
  @include ruf-card-typography($typography-config);
  @include ruf-sitemap-typography($typography-config);
  @include ruf-statusbar-typography($typography-config);
  @include ruf-ellipsis-typography($typography-config);
  @include ruf-segment-typography($typography-config);
  @include ruf-slide-panel-typography($typography-config);
}






















@mixin ruf-inkbar-theme($theme) {
  $background: map-get($theme, background);
  $main-colors: primary, accent, warn, emphasis;
  $background-colors: error, success, info;

  .ruf-inkbar {
    @include  _ruf-inkbar-border-color($theme, $main-colors);
    @include  _ruf-inkbar-border-color($background, $background-colors);
  }
}

@mixin _ruf-inkbar-border-color($color-map, $colors) {
    @each $color in $colors {
      &.ruf-inkbar-#{$color} {
        .ruf-inkbar-item {
          border-color: transparent;
          &.ruf-inkbar-active {
            @if(type-of(map-get($color-map, $color)) == 'map') {
              border-color: ruf-color(map-get($color-map, $color));
            } @else {
              // if $color-map does not contains map e.g background
              border-color: ruf-color($color-map, $color);
            }
          }
        }
      }
    }
}


@mixin ruf-theme($theme, $typography-config: null) {
  @include ruf-base-theme($theme);

  // include each component theme mixins here
  @include ruf-toolbar-theme($theme);
  @include ruf-banner-theme($theme);
  @include ruf-dynamic-menubar-theme($theme);
  @include ruf-dynamic-sidemenu-theme($theme);
  @include ruf-menubar-theme($theme);
  @include ruf-sidemenu-theme($theme);
  @include ruf-footer-theme($theme);
  @include ruf-app-canvas-theme($theme);
  @include ruf-page-header-theme($theme);
  @include ruf-navbar-theme($theme);
  @include ruf-dialog-panel-theme($theme);
  @include ruf-megamenu-theme($theme);
  @include ruf-menu-label-theme($theme);
  @include ruf-dropdown-panel-theme($theme);
  @include ruf-card-theme($theme);
  @include ruf-sitemap-theme($theme);
  @include ruf-statusbar-theme($theme);
  @include ruf-ellipsis-theme($theme);
  @include ruf-slide-panel-theme($theme);
  @include ruf-inkbar-theme($theme);
  @include ruf-shell-typography( $typography-config );
  @include ruf-segment-theme($theme);
}
