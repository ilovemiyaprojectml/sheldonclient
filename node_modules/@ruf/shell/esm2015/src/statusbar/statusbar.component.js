import * as tslib_1 from "tslib";
import { ChangeDetectorRef, ChangeDetectionStrategy, Component, Input, Output, HostBinding, ViewEncapsulation, EventEmitter, ViewChild, ElementRef } from '@angular/core';
import { trigger, state, style, transition, animate } from '@angular/animations';
import { RufShellIntl } from '../utils/shell-intl';
let RufStatusbarComponent = class RufStatusbarComponent {
    constructor(_intl, changeDetectorRef) {
        this._intl = _intl;
        this.color = 'accent';
        this.closeable = true;
        this.expandable = false;
        this.border = true;
        this.isSubtitleEmpty = false;
        this.visible = true;
        this.dismiss = new EventEmitter();
        this._intlChanges = _intl.changes.subscribe(() => changeDetectorRef.markForCheck());
    }
    get closeAriaLabel() {
        return this._closeAriaLabel || this._intl.statusbar.aria.closeIconLabel;
    }
    set closeAriaLabel(value) {
        this._closeAriaLabel = value;
    }
    get expandAriaLabel() {
        return this._expandAriaLabel || this._intl.statusbar.aria.expandIconLabel;
    }
    set expandAriaLabel(value) {
        this._expandAriaLabel = value;
    }
    get _class() {
        const colorClass = this.color ? `ruf-${this.color}` : 'ruf-accent';
        const borderClass = !this.border ? `ruf-statusbar-noborder` : '';
        return `${colorClass} ${borderClass}`;
    }
    onDismiss($event) {
        this.dismiss.emit();
    }
    ngOnDestroy() {
        this._intlChanges.unsubscribe();
    }
    ngAfterContentInit() {
        this.isSubtitleEmpty = this.subtitleContent.nativeElement.innerHTML.trim() === '';
    }
};
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String)
], RufStatusbarComponent.prototype, "title", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], RufStatusbarComponent.prototype, "color", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], RufStatusbarComponent.prototype, "closeable", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], RufStatusbarComponent.prototype, "expandable", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String)
], RufStatusbarComponent.prototype, "icon", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", Object)
], RufStatusbarComponent.prototype, "border", void 0);
tslib_1.__decorate([
    ViewChild('subtitleRef', { static: true }),
    tslib_1.__metadata("design:type", ElementRef)
], RufStatusbarComponent.prototype, "subtitleContent", void 0);
tslib_1.__decorate([
    HostBinding('@animation'),
    Input(),
    tslib_1.__metadata("design:type", Object)
], RufStatusbarComponent.prototype, "visible", void 0);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String),
    tslib_1.__metadata("design:paramtypes", [String])
], RufStatusbarComponent.prototype, "closeAriaLabel", null);
tslib_1.__decorate([
    Input(),
    tslib_1.__metadata("design:type", String),
    tslib_1.__metadata("design:paramtypes", [String])
], RufStatusbarComponent.prototype, "expandAriaLabel", null);
tslib_1.__decorate([
    HostBinding('class'),
    tslib_1.__metadata("design:type", Object),
    tslib_1.__metadata("design:paramtypes", [])
], RufStatusbarComponent.prototype, "_class", null);
tslib_1.__decorate([
    Output(),
    tslib_1.__metadata("design:type", Object)
], RufStatusbarComponent.prototype, "dismiss", void 0);
RufStatusbarComponent = tslib_1.__decorate([
    Component({
        selector: 'ruf-statusbar',
        template: "<div class=\"ruf-statusbar-wrapper\" rufId=\"statubar\" role=\"alert\">\n  <div class=\"ruf-statusbar-header\">\n    <ng-content select=\"ruf-statusbar-icon\"></ng-content>\n    <div *ngIf=\"icon\" class=\"ruf-statusbar-icon\" rufId=\"ruf-statusbar-default-icon\">\n      <mat-icon rufId [rufIcon]=\"icon\" rufIconStyle='md' [color]=\"color\"></mat-icon>\n    </div>\n    <div class=\"ruf-statusbar-content\" [ngClass]=\"{'no-header-content': !title && isSubtitleEmpty}\">\n      <div class=\"ruf-statusbar-header-text\">\n        <div *ngIf=\"title\" class=\"ruf-statusbar-title\" rufId=\"statubar_title\">{{title}}</div>\n        <div class=\"ruf-statusbar-subtitle\" #subtitleRef rufId=\"statusbar-subtitle\">\n          <ng-content></ng-content>\n        </div>\n      </div>\n      <div class=\"ruf-statusbar-detail\" [@expanded]=\"'' + (!expandable || trigger.value)\" rufId=\"statubar_detail\">\n        <ng-content select=\"ruf-statusbar-description, .ruf-statusbar-description\"></ng-content>\n      </div>\n    </div>\n    <button type=\"button\" [hidden]=\"!expandable\" rufToggleChevron fisStyle mat-icon-button class=\"ruf-statusbar-expand\" #trigger=\"rufToggle\"\n      [attr.aria-label]=\"expandAriaLabel\" rufId=\"statubar_expand\">\n    </button>\n\n    <button type=\"button\" *ngIf=\"closeable\" fisStyle mat-icon-button class=\"ruf-statusbar-close\" (click)=\"onDismiss($event)\" [attr.aria-label]=\"closeAriaLabel\"\n      rufId=\"statubar_close\">\n      <mat-icon rufIconStyle=\"sm\" fisIcon=\"close\"></mat-icon>\n    </button>\n  </div>\n</div>\n",
        animations: [trigger('animation', [
                state('0', style({ height: '0', 'min-height': '0', visibility: 'hidden' })),
                state('1', style({ height: '*', 'min-height': '*', visibility: 'visible' })),
                transition('0 => 1', animate('250ms ease-in')),
                transition('1 => 0', animate('250ms ease-out'))
            ]), trigger('expanded', [
                state('false', style({ height: 0, visibility: 'hidden' })),
                state('true', style({ height: '*', visibility: 'visible' })),
                transition('false => true', animate('300ms ease-in-out')),
                transition('true => false', animate('300ms ease-in-out'))
            ])],
        encapsulation: ViewEncapsulation.None,
        changeDetection: ChangeDetectionStrategy.OnPush,
        styles: ["ruf-statusbar{border-bottom-right-radius:.1875rem;border-left:.375rem solid;border-top-right-radius:.1875rem;display:block;min-height:2.5rem;overflow:hidden;padding:0 0 0 1rem;position:relative;-webkit-transition:border-left-color .2s;transition:border-left-color .2s}ruf-statusbar .ruf-statusbar-wrapper{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;-webkit-box-pack:center;justify-content:center;margin:auto;min-height:2.5rem}ruf-statusbar.ruf-statusbar-noborder{border-left:none}ruf-statusbar .ruf-statusbar-header{display:-webkit-box;display:flex;padding:2px}ruf-statusbar .ruf-statusbar-header .ruf-statusbar-icon{flex-shrink:0;margin-right:10px;overflow:hidden;padding-top:.4375rem;text-align:center}ruf-statusbar .ruf-statusbar-title{flex-shrink:1;margin-right:1rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}ruf-statusbar .ruf-statusbar-subtitle{-webkit-box-flex:1;flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}ruf-statusbar .ruf-statusbar-close{flex-shrink:0;height:2.125rem!important;margin-left:auto;margin-right:.1875rem;min-width:auto}ruf-statusbar .ruf-statusbar-expand{flex-shrink:0;font-size:18px;height:1.25rem;margin-left:auto;min-width:auto}ruf-statusbar .ruf-statusbar-detail{display:-webkit-box;display:flex}ruf-statusbar ruf-statusbar-description{overflow-wrap:break-word;width:100%}ruf-statusbar ruf-statusbar-description .ruf-statusbar-description{margin-bottom:.5em;margin-right:.5em}ruf-statusbar ruf-statusbar-description .ruf-statusbar-description[style*=hidden]{margin-bottom:0}ruf-statusbar .ruf-statusbar-expand:after{position:inherit}ruf-statusbar .ruf-toggle.ruf-toggle-chevron{height:2.125rem;margin:0 .125rem .125rem;padding-right:.625rem!important}ruf-statusbar .ruf-toggle.ruf-toggle-chevron:after{margin-right:0;padding-left:0;padding-right:0}ruf-statusbar .ruf-statusbar-header-text{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-direction:row;padding:.125rem 0}ruf-statusbar .ruf-statusbar-content{-webkit-box-flex:1;flex-grow:1;min-height:34px;min-width:0;padding-top:.4375rem;width:100%}ruf-statusbar .no-header-content{padding-top:.25rem}"]
    }),
    tslib_1.__metadata("design:paramtypes", [RufShellIntl, ChangeDetectorRef])
], RufStatusbarComponent);
export { RufStatusbarComponent };
let RufStatusbarIconComponent = class RufStatusbarIconComponent {
};
RufStatusbarIconComponent = tslib_1.__decorate([
    Component({
        selector: 'ruf-statusbar-icon',
        encapsulation: ViewEncapsulation.None,
        template: `
    <div class="ruf-statusbar-icon"><ng-content></ng-content></div>
  `
    })
], RufStatusbarIconComponent);
export { RufStatusbarIconComponent };
let RufStatusbarDescriptionComponent = class RufStatusbarDescriptionComponent {
};
RufStatusbarDescriptionComponent = tslib_1.__decorate([
    Component({
        selector: 'ruf-statusbar-description',
        encapsulation: ViewEncapsulation.None,
        template: `
   <div class="ruf-statusbar-description"><ng-content></ng-content></div>
  `
    })
], RufStatusbarDescriptionComponent);
export { RufStatusbarDescriptionComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHVzYmFyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BydWYvc2hlbGwvIiwic291cmNlcyI6WyJzcmMvc3RhdHVzYmFyL3N0YXR1c2Jhci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFDTCxpQkFBaUIsRUFDakIsdUJBQXVCLEVBQ3ZCLFNBQVMsRUFDVCxLQUFLLEVBRUwsTUFBTSxFQUNOLFdBQVcsRUFDWCxpQkFBaUIsRUFDakIsWUFBWSxFQUVaLFNBQVMsRUFDVCxVQUFVLEVBQ1gsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUNMLE9BQU8sRUFDUCxLQUFLLEVBQ0wsS0FBSyxFQUNMLFVBQVUsRUFDVixPQUFPLEVBQ1IsTUFBTSxxQkFBcUIsQ0FBQztBQUU3QixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFzQm5ELElBQWEscUJBQXFCLEdBQWxDLE1BQWEscUJBQXFCO0lBOENoQyxZQUFvQixLQUFtQixFQUFFLGlCQUFvQztRQUF6RCxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBdkM5QixVQUFLLEdBQUcsUUFBUSxDQUFDO1FBQ2pCLGNBQVMsR0FBRyxJQUFJLENBQUM7UUFDakIsZUFBVSxHQUFHLEtBQUssQ0FBQztRQUVuQixXQUFNLEdBQUcsSUFBSSxDQUFDO1FBRXZCLG9CQUFlLEdBQUcsS0FBSyxDQUFDO1FBSXhCLFlBQU8sR0FBRyxJQUFJLENBQUM7UUEyQkwsWUFBTyxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFHckMsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDO0lBQ3RGLENBQUM7SUE1QkQsSUFBSSxjQUFjO1FBQ2hCLE9BQU8sSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxJQUFJ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TUFBTSxFQUFFLEtBQUssQ0FBQyxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBQyxDQUFDLENBQUM7Z0JBQzNELFVBQVUsQ0FBQyxlQUFlLEVBQUUsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7Z0JBQ3pELFVBQVUsQ0FBQyxlQUFlLEVBQUUsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7YUFDMUQsQ0FBQyxDQUFDO1FBQ0gsYUFBYSxFQUFFLGlCQUFpQixDQUFDLElBQUk7UUFDckMsZUFBZSxFQUFFLHVCQUF1QixDQUFDLE1BQU07O0tBQ2hELENBQUM7NkNBZ0QyQixZQUFZLEVBQXFCLGlCQUFpQjtHQTlDbEUscUJBQXFCLENBNkRqQztTQTdEWSxxQkFBcUI7QUF1RWxDLElBQWEseUJBQXlCLEdBQXRDLE1BQWEseUJBQXlCO0NBQUcsQ0FBQTtBQUE1Qix5QkFBeUI7SUFQckMsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLG9CQUFvQjtRQUM5QixhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTtRQUNyQyxRQUFRLEVBQUU7O0dBRVQ7S0FDRixDQUFDO0dBQ1cseUJBQXlCLENBQUc7U0FBNUIseUJBQXlCO0FBU3RDLElBQWEsZ0NBQWdDLEdBQTdDLE1BQWEsZ0NBQWdDO0NBQUcsQ0FBQTtBQUFuQyxnQ0FBZ0M7SUFQNUMsU0FBUyxDQUFDO1FBQ1QsUUFBUSxFQUFFLDJCQUEyQjtRQUNyQyxhQUFhLEVBQUUsaUJBQWlCLENBQUMsSUFBSTtRQUNyQyxRQUFRLEVBQUU7O0dBRVQ7S0FDRixDQUFDO0dBQ1csZ0NBQWdDLENBQUc7U0FBbkMsZ0NBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDb21wb25lbnQsXG4gIElucHV0LFxuICBPbkRlc3Ryb3ksXG4gIE91dHB1dCxcbiAgSG9zdEJpbmRpbmcsXG4gIFZpZXdFbmNhcHN1bGF0aW9uLFxuICBFdmVudEVtaXR0ZXIsXG4gIEFmdGVyQ29udGVudEluaXQsXG4gIFZpZXdDaGlsZCxcbiAgRWxlbWVudFJlZlxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIHRyaWdnZXIsXG4gIHN0YXRlLFxuICBzdHlsZSxcbiAgdHJhbnNpdGlvbixcbiAgYW5pbWF0ZVxufSBmcm9tICdAYW5ndWxhci9hbmltYXRpb25zJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgUnVmU2hlbGxJbnRsIH0gZnJvbSAnLi4vdXRpbHMvc2hlbGwtaW50bCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3J1Zi1zdGF0dXNiYXInLFxuICB0ZW1wbGF0ZVVybDogJy4vc3RhdHVzYmFyLmNvbXBvbmVudC5odG1sJyxcblxuICBzdHlsZVVybHM6IFsnLi9zdGF0dXNiYXIuY29tcG9uZW50LnNjc3MnXSxcbiAgYW5pbWF0aW9uczogW3RyaWdnZXIoJ2FuaW1hdGlvbicsIFtcbiAgICBzdGF0ZSgnMCcsIHN0eWxlKHsgaGVpZ2h0OiAnMCcsICdtaW4taGVpZ2h0JzogJzAnLCB2aXNpYmlsaXR5OiAnaGlkZGVuJ30pKSxcbiAgICBzdGF0ZSgnMScsIHN0eWxlKHsgaGVpZ2h0OiAnKicsICdtaW4taGVpZ2h0JzogJyonLCB2aXNpYmlsaXR5OiAndmlzaWJsZSd9KSksXG4gICAgdHJhbnNpdGlvbignMCA9PiAxJywgYW5pbWF0ZSgnMjUwbXMgZWFzZS1pbicpKSxcbiAgICB0cmFuc2l0aW9uKCcxID0+IDAnLCBhbmltYXRlKCcyNTBtcyBlYXNlLW91dCcpKVxuICAgIF0pLCB0cmlnZ2VyKCdleHBhbmRlZCcsIFtcbiAgICBzdGF0ZSgnZmFsc2UnLCBzdHlsZSh7IGhlaWdodDogMCwgdmlzaWJpbGl0eTogJ2hpZGRlbicgfSkpLFxuICAgIHN0YXRlKCd0cnVlJywgc3R5bGUoeyBoZWlnaHQ6ICcqJywgdmlzaWJpbGl0eTogJ3Zpc2libGUnfSkpLFxuICAgIHRyYW5zaXRpb24oJ2ZhbHNlID0+IHRydWUnLCBhbmltYXRlKCczMDBtcyBlYXNlLWluLW91dCcpKSxcbiAgICB0cmFuc2l0aW9uKCd0cnVlID0+IGZhbHNlJywgYW5pbWF0ZSgnMzAwbXMgZWFzZS1pbi1vdXQnKSlcbiAgXSldLFxuICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxufSlcblxuZXhwb3J0IGNsYXNzIFJ1ZlN0YXR1c2JhckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSwgQWZ0ZXJDb250ZW50SW5pdCB7XG4gIHByaXZhdGUgX2ludGxDaGFuZ2VzOiBTdWJzY3JpcHRpb247XG4gIHByaXZhdGUgX2Nsb3NlQXJpYUxhYmVsOiBzdHJpbmc7XG4gIHByaXZhdGUgX2V4cGFuZEFyaWFMYWJlbDogc3RyaW5nO1xuXG4gIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmc7XG5cbiAgQElucHV0KCkgY29sb3IgPSAnYWNjZW50JztcbiAgQElucHV0KCkgY2xvc2VhYmxlID0gdHJ1ZTtcbiAgQElucHV0KCkgZXhwYW5kYWJsZSA9IGZhbHNlO1xuICBASW5wdXQoKSBpY29uOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGJvcmRlciA9IHRydWU7XG4gIEBWaWV3Q2hpbGQoJ3N1YnRpdGxlUmVmJywge3N0YXRpYzogdHJ1ZX0pIHN1YnRpdGxlQ29udGVudDogRWxlbWVudFJlZjxhbnk+O1xuICBpc1N1YnRpdGxlRW1wdHkgPSBmYWxzZTtcblxuICBASG9zdEJpbmRpbmcoJ0BhbmltYXRpb24nKVxuICBASW5wdXQoKVxuICB2aXNpYmxlID0gdHJ1ZTtcblxuICBASW5wdXQoKVxuICBnZXQgY2xvc2VBcmlhTGFiZWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Nsb3NlQXJpYUxhYmVsIHx8IHRoaXMuX2ludGwuc3RhdHVzYmFyLmFyaWEuY2xvc2VJY29uTGFiZWw7XG4gIH1cblxuICBzZXQgY2xvc2VBcmlhTGFiZWwodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX2Nsb3NlQXJpYUxhYmVsID0gdmFsdWU7XG4gIH1cblxuICBASW5wdXQoKVxuICBnZXQgZXhwYW5kQXJpYUxhYmVsKCkge1xuICAgIHJldHVybiB0aGlzLl9leHBhbmRBcmlhTGFiZWwgfHwgdGhpcy5faW50bC5zdGF0dXNiYXIuYXJpYS5leHBhbmRJY29uTGFiZWw7XG4gIH1cblxuICBzZXQgZXhwYW5kQXJpYUxhYmVsKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9leHBhbmRBcmlhTGFiZWwgPSB2YWx1ZTtcbiAgfVxuXG4gIEBIb3N0QmluZGluZygnY2xhc3MnKVxuICBnZXQgX2NsYXNzKCkge1xuICAgIGNvbnN0IGNvbG9yQ2xhc3MgPSAgdGhpcy5jb2xvciA/IGBydWYtJHt0aGlzLmNvbG9yfWAgOiAncnVmLWFjY2VudCc7XG4gICAgY29uc3QgYm9yZGVyQ2xhc3MgPSAgIXRoaXMuYm9yZGVyID8gYHJ1Zi1zdGF0dXNiYXItbm9ib3JkZXJgIDogJyc7XG4gICAgcmV0dXJuIGAke2NvbG9yQ2xhc3N9ICR7Ym9yZGVyQ2xhc3N9YDtcbiAgfVxuXG4gIEBPdXRwdXQoKSBkaXNtaXNzID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgX2ludGw6IFJ1ZlNoZWxsSW50bCwgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmKSB7XG4gICAgdGhpcy5faW50bENoYW5nZXMgPSBfaW50bC5jaGFuZ2VzLnN1YnNjcmliZSgoKSA9PiBjaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKSk7XG4gIH1cblxuICBvbkRpc21pc3MoJGV2ZW50KSB7XG4gICAgdGhpcy5kaXNtaXNzLmVtaXQoKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuX2ludGxDaGFuZ2VzLnVuc3Vic2NyaWJlKCk7XG4gIH1cblxuICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgdGhpcy5pc1N1YnRpdGxlRW1wdHkgPSB0aGlzLnN1YnRpdGxlQ29udGVudC5uYXRpdmVFbGVtZW50LmlubmVySFRNTC50cmltKCkgPT09ICcnO1xuICB9XG59XG5cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncnVmLXN0YXR1c2Jhci1pY29uJyxcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcbiAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2IGNsYXNzPVwicnVmLXN0YXR1c2Jhci1pY29uXCI+PG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PjwvZGl2PlxuICBgXG59KVxuZXhwb3J0IGNsYXNzIFJ1ZlN0YXR1c2Jhckljb25Db21wb25lbnQge31cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncnVmLXN0YXR1c2Jhci1kZXNjcmlwdGlvbicsXG4gIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gIHRlbXBsYXRlOiBgXG4gICA8ZGl2IGNsYXNzPVwicnVmLXN0YXR1c2Jhci1kZXNjcmlwdGlvblwiPjxuZy1jb250ZW50PjwvbmctY29udGVudD48L2Rpdj5cbiAgYFxufSlcbmV4cG9ydCBjbGFzcyBSdWZTdGF0dXNiYXJEZXNjcmlwdGlvbkNvbXBvbmVudCB7fVxuXG4iXX0=