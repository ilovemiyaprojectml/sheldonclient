(function () {
  'use strict';

  angular
    .module('fis.bootstrap.table')
    .directive('fisBsDropdownMultiselect', dropdownMultiselect);

  function dropdownMultiselect() {
    'use strict';
    return {
      restrict: 'E',
      scope: {
        options: '='
      },
      templateUrl: 'table/dropdownMultiselect.directive.html',
      link: function (scope) {
        scope.setSelectedItem = function (e) {
          e.stopPropagation();
          var id = this.option.id;
          scope.showHide(id);
          return false;
        };

        scope.isChecked = function (val) {
          if (val) {
            return 'icon-ok';
          }
          return false;
        };

        scope.showHide = function (id) {
          var val = scope.$parent.roles[id].checkValue;
          if (val) {
            scope.$parent.roles[id].checkValue = false;
          } else {
            scope.$parent.roles[id].checkValue = true;
          }
        };
      }
    };
  }
})();

