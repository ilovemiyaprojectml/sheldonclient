(function () {
  'use strict';

  angular
    .module('demo-fisBootstrapTable.table')
    .controller('tableClientPagination', tableClientPagination);

  tableClientPagination.$inject = ['$scope',
    'TableDataService'];

  function tableClientPagination($scope, TableDataService) {
    $scope.displayDataCollection = [];
    $scope.displayOneColCollection = [];
    $scope.roles = [];
    $scope.init = function (name) {
      $scope.tablename = name;
    };
    $scope.loadServerData = function () {
      TableDataService.getTableContent('all').then(function (data) {
        $scope.tableDataArr = data.tableRowData;
        $scope.tableOneDataArr = data.tableOneColData;

        // make first time sort as sort by first row
        $scope.tableDataArr.sort(function (a, b) {
          return a.data1.localeCompare(b.data1);
        });

        $scope.tableOneDataArr.sort(function (a, b) {
          return a.data1.localeCompare(b.data1);
        });

        // copy the references (you could clone
        // ie angular.copy but then have to go
        // through a dirty checking for the
        // matches)
        $scope.displayDataCollection = [].concat($scope.rowCollection);
      }, function (ex) {
        alert('Error retrieving the table json data!!', ex);
        // return true;
      });
    };

    $scope.loadServerData();

    $scope.showMessage = function showMessage(row) {
      alert('Hi... ' + row.alias);
    };
  }
})();
