/**
 * Using Rails-like standard naming convention for endpoints.
 * GET     /versions              ->  index
 * POST    /versions              ->  create
 * GET     /versions/:id          ->  show
 * PUT     /versions/:id          ->  update
 * DELETE  /versions/:id          ->  destroy
 */

'use strict';

var fs = require('fs');
var path = require('path');

// Get version
exports.index = function (req, res) {
  var appBase = 'demo';
  var bowerFilePath = path.join(process.cwd(), appBase, 'vendor', 'html5-framework-core-components', 'bower.json');
  fs.readFile(bowerFilePath, 'utf-8', function (err, data) {
    if (err) {
      throw err;
    }
    var frameworkVersion = JSON.parse(data).version;
    res.json([
      {
        name: 'framework-version',
        value: frameworkVersion
      },
      {
        name: 'generator-version',
        value: '1.0.0'
      }
    ]);
  });
};
