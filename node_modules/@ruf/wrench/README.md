# RUF Wrench
This is a CLI package. It contains Tools and Utilities for workspaces generated using RUF CLI.
It needs the project to be a angular project e.g., angular.json should be present at the root of project where this CLI is executed.  

## Installation

```sh
$ npm install --save @ruf/wrench
```

## Commands
RUF Wrench contains following commands.

### bundle-scss

**Description**
Uses [scss-bundle](https://www.npmjs.com/package/scss-bundle) library to run `scss-bundle` command on project's theme file. The `scss-bundle` command is used to bundle all files (imported by this theme) into a single file. It searches all referenced scss files recursively and creates a single file out of it.

Applications using this library can then import only one file.

It removes files imported from external modules (`node_modules/*`) so that they are not included in the final bundle.

**Usage**

```sh
ruf-wrench bundle-scss --projectRoot=libs/mybu/lib2 --projectName=mybu-lib2
```

**Inputs**

* *projectRoot* - Root directory path of the library for which the bundle is being generated.
* *projectName* - This is the project name used in Angular.json file
* *libName* - This will be used as a file name to search for the theme file. 

E.g., if `projectRoot` is `libs/widgets` and `libName` is `widgets`, it will search for file `./libs/widgets/src/lib/_widgets-theme.scss` and generate the bundled scss in `./dist/libs/widgets/_widgets-theme.scss`

### generate-package-metadata

**Description**

Uses `@ruf/store-packager` package to create `packageMetadata.json` file for workspace (angular) library. This file contains metadata for all components/directives/pipes/modules/services etc. for a package. The metadata has information like name, class name, type (Component, Direcive, Injectable etc.), source file path, examples, documentation etc.

This data is used by [RUF Store](https://ruf-store.fnfis.com) application to display content information, examples of the package.

**Usage**

```sh
ruf-wrench generate-package-metadata --root libs/widgets/index.ts --dest dist/widgets
```

**Inputs**

* *root* - Root index file of the library. This file will be used to lookup all the components, directives etc. inside the package.
* *dest* - Destination path where `packageMetadata.json` will be created.

### generate-rtl-styles

**Description**

Generates right-to-left(RTL) styles from your scss source file.

It adds new block in your scss file as below:-

```
[dir="rtl"] {
    .....


    ....
}
```

You might need to adjust some styles in generated RTL styles

For example for below css:
```css
.align-right {
    right: 0;
}
```

`generate-rtl-styles` command will generate below output

```css
[dir='rtl'] {
    .align-right {
        left: 0;
    }
} 
```

but to make it work properly you need to adjust right styles as well hence actual css code should be as below:-

```css
[dir='rtl'] {
    .align-right {
        left: 0;
        right: auto; // adjust right
    }
}
```

**Usage**

```sh 
ruf-wrench generate-rtl-styles --path C:\workplace\ruf\ruf-monorepo\apps\ruf-app\src\app\demo-ruf-layout\**\*.scss
```

```sh 
ruf-wrench generate-rtl-styles --path apps\ruf-app\src\app\demo-ruf-layout\**\*.scss

```

```sh
ruf-wrench generate-rtl-styles
```

**Inputs**
* *path*: path for scss files to be converted into RTL. This input is optional, if not passed command will consider current directory as default path.


**Supported properties for RTL**

`border-left`

`border-bottom-right-radius`

`border-bottom-left-radius`

`border-top-right-radius`

`border-top-left-radius`

`border-left-color`

`border-left-style`

`border-left-width`

`border-right`

`border-right-color`

`border-right-width`

`border-right-style`

`left`

`margin-left`

`margin-right`

`padding-left` 

`padding-right` 

`right`

`border-radius`

`border-style`

`border-width`

`clear`

`float`

`margin`

`padding`

`text-align`


## CLI Usage

```sh
ruf-wrench <command>
```

